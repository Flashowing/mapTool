(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~dde152d4"],{da05:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a("b7c8"),r=a("f20a"),s=a("8b68"),c=a("dc1c"),o=a("2f63"),i=a("a894"),u=a("0123"),d=a("6b0e"),p=a("c92c"),f=a("d289"),l=a("1b8d"),b=a("6dc0"),h=a("3626"),m=a("9693"),S=a("7c5e"),T=a("1842"),A=a("cef5"),E=a("52f0"),g=a("c86b");function w(e,t){const a=e.shaderBuilder;a.addVertexLines([p["a"]]),a.addFragmentLines([d["a"]]);const n=e.model;let r=e.primitiveType;const s=n.debugWireframe&&l["a"].isTriangles(r),u=x(e,s,t),w=new S["a"]({context:t.context,indexBuffer:u,attributes:e.attributes});n._resources.push(w);let _=e.renderStateOptions;n.opaquePass===f["a"].CESIUM_3D_TILE&&(_=Object(c["a"])(_,!0),_.stencilTest=h["a"].setCesium3DTileBit(),_.stencilMask=h["a"].CESIUM_3D_TILE_MASK),_=b["a"].fromCache(_);const C=a.buildShaderProgram(t.context);n._resources.push(C);const L=e.alphaOptions.pass,I=n.sceneGraph,N=E["a"].multiply(I.computedModelMatrix,e.runtimeNode.computedTransform,new E["a"]);e.boundingSphere=A["a"].transform(e.boundingSphere,N,e.boundingSphere);let B=e.count;s&&(B=T["a"].getWireframeIndicesCount(r,B),r=l["a"].LINES);const M=new i["a"]({boundingVolume:e.boundingSphere,modelMatrix:N,uniformMap:e.uniformMap,renderState:_,vertexArray:w,shaderProgram:C,cull:n.cull,pass:L,count:B,pickId:e.pickId,instanceCount:e.instanceCount,primitiveType:r,debugShowBoundingVolume:n.debugShowBoundingVolume,castShadows:g["a"].castShadows(n.shadows),receiveShadows:g["a"].receiveShadows(n.shadows)}),O=e.styleCommandsNeeded,k=[];if(Object(o["a"])(O)){const e=y(M);if(L!==f["a"].TRANSLUCENT)switch(O){case m["a"].ALL_OPAQUE:k.push(M);break;case m["a"].ALL_TRANSLUCENT:k.push(e.translucent);break;case m["a"].OPAQUE_AND_TRANSLUCENT:k.push(M,e.translucent);break}else k.push(M)}else k.push(M);return k}function y(e){const t={};return t.translucent=_(e),t}function _(e){const t=i["a"].shallowClone(e);t.pass=f["a"].TRANSLUCENT;const a=Object(c["a"])(e.renderState,!0);return a.cull.enabled=!1,a.depthTest.enabled=!0,a.depthMask=!1,a.blending=n["a"].ALPHA_BLEND,t.renderState=b["a"].fromCache(a),t}function x(e,t,a){if(t)return C(e,a);const n=e.indices;if(!Object(o["a"])(n))return;if(Object(o["a"])(n.buffer))return n.buffer;const c=n.typedArray,i=u["a"].fromSizeInBytes(c.BYTES_PER_ELEMENT);return r["a"].createIndexBuffer({context:a.context,typedArray:c,usage:s["a"].STATIC_DRAW,indexDatatype:i})}function C(e,t){let a;const n=e.attributes,c=n.length;for(let r=0;r<c;r++)if(0===n[r].index){a=n[r];break}const i=a.count,d=e.indices,p=t.context;let f;if(Object(o["a"])(d)){const e=d.buffer,t=d.count,a=p.webgl2;a&&Object(o["a"])(e)?(f=u["a"].createTypedArray(i,t),e.getBufferData(f)):f=d.typedArray}const l=e.primitiveType,b=T["a"].createWireframeIndices(l,i,f),h=u["a"].fromSizeInBytes(b.BYTES_PER_ELEMENT);return r["a"].createIndexBuffer({context:p,typedArray:b,usage:s["a"].STATIC_DRAW,indexDatatype:h})}}}]);