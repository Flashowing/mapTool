(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~e49aeb6b"],{5457:function(t,e,n){"use strict";const i={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",isBinaryFormat:function(t){switch(t){case i.BATCHED_3D_MODEL:case i.INSTANCED_3D_MODEL:case i.COMPOSITE:case i.POINT_CLOUD:case i.VECTOR:case i.GEOMETRY:case i.IMPLICIT_SUBTREE:case i.GLTF_BINARY:return!0;default:return!1}}};e["a"]=Object.freeze(i)},"56d3":function(t,e,n){"use strict";function i(t){this.pass=t.pass,this.commandList=t.commandList,this.camera=t.camera,this.cullingVolume=t.cullingVolume,this.ready=!1}e["a"]=i},"5af0":function(t,e,n){"use strict";var i=n("bd8d"),o=n("2f63");function r(t,e){this._content=t,this._batchId=e,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(t){this._content.batchTable.setShow(this._batchId,t)}},color:{get:function(){return Object(o["a"])(this._color)||(this._color=new i["a"]),this._content.batchTable.getColor(this._batchId,this._color)},set:function(t){this._content.batchTable.setColor(this._batchId,t)}},polylinePositions:{get:function(){if(Object(o["a"])(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},r.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},r.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},r.getPropertyInherited=function(t,e,n){const i=t.batchTable;if(Object(o["a"])(i)){if(i.hasPropertyBySemantic(e,n))return i.getPropertyBySemantic(e,n);if(i.hasProperty(e,n))return i.getProperty(e,n)}const r=t.metadata;if(Object(o["a"])(r)){if(r.hasPropertyBySemantic(n))return r.getPropertyBySemantic(n);if(r.hasProperty(n))return r.getProperty(n)}const a=t.tile,s=a.metadata;if(Object(o["a"])(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let c;if(Object(o["a"])(a.implicitSubtree)&&(c=a.implicitSubtree.metadata),Object(o["a"])(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}const l=Object(o["a"])(t.group)?t.group.metadata:void 0;if(Object(o["a"])(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}const u=t.tileset.metadata;if(Object(o["a"])(u)){if(u.hasPropertyBySemantic(n))return u.getPropertyBySemantic(n);if(u.hasProperty(n))return u.getProperty(n)}},r.prototype.getPropertyInherited=function(t){return r.getPropertyInherited(this._content,this._batchId,t)},r.prototype.setProperty=function(t,e){this._content.batchTable.setProperty(this._batchId,t,e),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},r.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},e["a"]=r},6380:function(t,e,n){"use strict";const i={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};e["a"]=Object.freeze(i)},"656b":function(t,e,n){"use strict";const i={HIGHLIGHT:0,REPLACE:1,MIX:2};e["a"]=Object.freeze(i)},6596:function(t,e,n){"use strict";var i=n("670c"),o=n("dc1c"),r=n("bd8d"),a=n("2bb9"),s=n("535a"),c=n("2f63"),l=n("45c5"),u=n("7d62"),h=(n("4f04"),n("93da")),d=n("283e"),_=n("b997"),f=n("a894"),b=n("d289"),p=n("6dc0"),g=n("5770"),m=n("420f"),y=n("67b9"),O=n("b7c8"),S=n("656b"),C=n("29ab"),T=n("c13c"),E=n("3626"),P=n("6102"),D=n("25ef");const v=m["a"].DEFAULT_COLOR_VALUE,I=m["a"].DEFAULT_SHOW_VALUE;function j(t,e,n,i,o){let r;this.featuresLength=e,Object(c["a"])(n)&&(r=n.extensions),this._extensions=Object(s["a"])(r,{});const a=w(n);this._properties=a,this._batchTableHierarchy=x(this,n,i),this._batchTableBinaryProperties=R(e,a,i),this._content=t,this._batchTexture=new m["a"]({featuresLength:e,colorChangedCallback:o,owner:t,statistics:t.tileset.statistics})}function w(t){const e={};if(!Object(c["a"])(t))return e;for(const n in t)t.hasOwnProperty(n)&&"HIERARCHY"!==n&&"extensions"!==n&&"extras"!==n&&(e[n]=Object(o["a"])(t[n],!0));return e}function x(t,e,n){if(!Object(c["a"])(e))return;let i=t._extensions["3DTILES_batch_table_hierarchy"];const o=e.HIERARCHY;return Object(c["a"])(o)&&(j._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),t._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),Object(c["a"])(i)?new y["a"]({extension:i,binaryBody:n}):void 0}function R(t,e,n){let i;for(const o in e)if(e.hasOwnProperty(o)){const r=e[o],a=r.byteOffset;if(Object(c["a"])(a)){const e=r.componentType,s=r.type;if(!Object(c["a"])(e))throw new d["a"]("componentType is required.");if(!Object(c["a"])(s))throw new d["a"]("type is required.");if(!Object(c["a"])(n))throw new d["a"](`Property ${o} requires a batch table binary.`);const l=Object(T["a"])(r),u=l.componentsPerAttribute,h=l.classType,_=l.createArrayBufferView(n.buffer,n.byteOffset+a,t);Object(c["a"])(i)||(i={}),i[o]={typedArray:_,componentCount:u,type:h}}}return i}j._deprecationWarning=l["a"],Object.defineProperties(j.prototype,{memorySizeInBytes:{get:function(){return this._batchTexture.memorySizeInBytes}}}),j.getBinaryProperties=function(t,e,n){return R(t,e,n)},j.prototype.setShow=function(t,e){this._batchTexture.setShow(t,e)},j.prototype.setAllShow=function(t){this._batchTexture.setAllShow(t)},j.prototype.getShow=function(t){return this._batchTexture.getShow(t)},j.prototype.setColor=function(t,e){this._batchTexture.setColor(t,e)},j.prototype.setAllColor=function(t){this._batchTexture.setAllColor(t)},j.prototype.getColor=function(t,e){return this._batchTexture.getColor(t,e)},j.prototype.getPickColor=function(t){return this._batchTexture.getPickColor(t)};const L=new r["a"];function V(t,e){const n=t.typedArray,i=t.componentCount;return 1===i?n[e]:t.type.unpack(n,e*i)}function A(t,e,n){const i=t.typedArray,o=t.componentCount;1===o?i[e]=n:t.type.pack(n,i,e*o)}function B(t){return 1===t._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}function M(t,e){return t=g["a"].replaceMain(t,"tile_main"),e?t+"uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n":t+"void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n"}function N(t,e){const n="texture2D("+e;let i,o=0,r=t.indexOf(n,o);while(r>-1){let e=0;for(let n=r;n<t.length;++n){const o=t.charAt(n);if("("===o)++e;else if(")"===o&&(--e,0===e)){i=n+1;break}}const a=t.slice(r,i),s=`tile_diffuse_final(${a}, tile_diffuse)`;t=t.slice(0,r)+s+t.slice(i),o=r+s.length,r=t.indexOf(n,o)}return t}function z(t,e,n){if(!Object(c["a"])(e))return M(t,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${e};`);const o=t.match(i);if(!Object(c["a"])(o))return M(t,n);const r=o[0],a=o[2];t=g["a"].replaceMain(t,"tile_main"),t=t.replace(r,"");const s="bool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n",l="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n";let u;if("vec3"===a||"vec4"===a){const n="vec3"===a?`vec4(${e}, 1.0)`:e,o="vec3"===a?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(e,"g"),t=t.replace(i,o),u=`    vec4 source = ${n}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===a&&(t=N(t,e),u="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return t=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \n${s}${r}\n${t}\nvoid tile_color(vec4 tile_featureColor) \n{ \n`+u,n&&(t+=l),t+="} \n",t}function F(t){const e=t._content.tileset,n=e.colorBlendMode,i=e.colorBlendAmount;return n===S["a"].HIGHLIGHT?0:n===S["a"].REPLACE?1:n===S["a"].MIX?h["a"].clamp(i,h["a"].EPSILON4,1):void 0}j.prototype.applyStyle=function(t){if(!Object(c["a"])(t))return this.setAllColor(v),void this.setAllShow(I);const e=this._content,n=this.featuresLength;for(let i=0;i<n;++i){const n=e.getFeature(i),o=Object(c["a"])(t.color)?Object(s["a"])(t.color.evaluateColor(n,L),v):v,r=Object(c["a"])(t.show)?Object(s["a"])(t.show.evaluate(n),I):I;this.setColor(i,o),this.setShow(i,r)}},j.prototype.isClass=function(t,e){const n=this._batchTableHierarchy;return!!Object(c["a"])(n)&&n.isClass(t,e)},j.prototype.isExactClass=function(t,e){return this.getExactClassName(t)===e},j.prototype.getExactClassName=function(t){const e=this._batchTableHierarchy;if(Object(c["a"])(e))return e.getClassName(t)},j.prototype.hasProperty=function(t,e){return Object(c["a"])(this._properties[e])||Object(c["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(t,e)},j.prototype.hasPropertyBySemantic=function(){return!1},j.prototype.getPropertyNames=function(t,e){e=Object(c["a"])(e)?e:[],e.length=0;const n=Object.keys(this._properties);return e.push.apply(e,n),Object(c["a"])(this._batchTableHierarchy)&&e.push.apply(e,this._batchTableHierarchy.getPropertyIds(t,n)),e},j.prototype.getPropertyBySemantic=function(t,e){},j.prototype.getProperty=function(t,e){if(Object(c["a"])(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[e];if(Object(c["a"])(n))return V(n,t)}const n=this._properties[e];if(Object(c["a"])(n))return Object(o["a"])(n[t],!0);if(Object(c["a"])(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getProperty(t,e);if(Object(c["a"])(n))return n}},j.prototype.setProperty=function(t,e,n){const i=this.featuresLength;if(Object(c["a"])(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[e];if(Object(c["a"])(i))return void A(i,t,n)}if(Object(c["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(t,e,n))return;let r=this._properties[e];Object(c["a"])(r)||(this._properties[e]=new Array(i),r=this._properties[e]),r[t]=Object(o["a"])(n,!0)},j.prototype.getVertexShaderCallback=function(t,e,n){if(0===this.featuresLength)return;const i=this;return function(o){const r=z(o,n,!1);let a;return _["a"].maximumVertexTextureImageUnits>0?(a="",t&&(a+="uniform bool tile_translucentCommand; \n"),a+=`uniform sampler2D tile_batchTexture; \nvarying vec4 tile_featureColor; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${e}); \n    vec4 featureProperties = texture2D(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,t&&(a+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),a+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):a=`varying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${e}); \n}`,`${r}\n${B(i)}${a}`}},j.prototype.getFragmentShaderCallback=function(t,e,n){if(0!==this.featuresLength)return function(i){return i=z(i,e,!0),_["a"].maximumVertexTextureImageUnits>0?(i+="uniform sampler2D tile_pickTexture; \nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",n&&(i+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),i+="}"):(t&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",t&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n",n&&(i+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),i+="} \n"),i}},j.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(t){return t=g["a"].replaceMain(t,"tile_main"),_["a"].maximumVertexTextureImageUnits>0?t+="uniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    gl_FragColor = tile_featureColor; \n    gl_FragColor.rgb *= gl_FragColor.a; \n}":t+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = featureProperties; \n    gl_FragColor.rgb *= gl_FragColor.a; \n} \n",t}},j.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const t=this;return function(e){const n={tile_batchTexture:function(){return Object(s["a"])(t._batchTexture.batchTexture,t._batchTexture.defaultTexture)},tile_textureDimensions:function(){return t._batchTexture.textureDimensions},tile_textureStep:function(){return t._batchTexture.textureStep},tile_colorBlend:function(){return F(t)},tile_pickTexture:function(){return t._batchTexture.pickTexture}};return Object(a["a"])(e,n)}},j.prototype.getPickId=function(){return"texture2D(tile_pickTexture, tile_featureSt)"};const k={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};function U(t){const e=t._batchTexture.translucentFeaturesLength;return 0===e?k.ALL_OPAQUE:e===t.featuresLength?k.ALL_TRANSLUCENT:k.OPAQUE_AND_TRANSLUCENT}function q(t){const e=f["a"].shallowClone(t),n=e.pass===b["a"].TRANSLUCENT;return e.uniformMap=Object(c["a"])(e.uniformMap)?e.uniformMap:{},e.uniformMap.tile_translucentCommand=function(){return n},e}function W(t){const e=f["a"].shallowClone(t);return e.pass=b["a"].TRANSLUCENT,e.renderState=$(t.renderState),e}function H(t){const e=f["a"].shallowClone(t);return e.renderState=Q(t.renderState),e}function G(t,e){let n=t.shaderCache.getDerivedShaderProgram(e,"zBackfaceLogDepth");if(!Object(c["a"])(n)){const i=e.fragmentShaderSource.clone();i.defines=Object(c["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),i.sources.unshift("#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n"),n=t.shaderCache.createDerivedShaderProgram(e,"zBackfaceLogDepth",{vertexShaderSource:e.vertexShaderSource,fragmentShaderSource:i,attributeLocations:e._attributeLocations})}return n}function K(t,e){const n=f["a"].shallowClone(e),r=Object(o["a"])(n.renderState,!0);r.cull.enabled=!0,r.cull.face=C["a"].FRONT,r.colorMask={red:!1,green:!1,blue:!1,alpha:!1},r.polygonOffset={enabled:!0,factor:5,units:5},r.stencilTest=E["a"].setCesium3DTileBit(),r.stencilMask=E["a"].CESIUM_3D_TILE_MASK,n.renderState=p["a"].fromCache(r),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=Object(o["a"])(e.uniformMap);const a=new i["a"](5,5);return n.uniformMap.u_polygonOffset=function(){return a},n.shaderProgram=G(t,e.shaderProgram),n}function Y(t,e){const n=f["a"].shallowClone(t),i=Object(o["a"])(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=E["a"].SKIP_LOD_MASK,i.stencilTest.reference=E["a"].CESIUM_3D_TILE_MASK|e<<E["a"].SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=P["a"].GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=D["a"].REPLACE,i.stencilTest.backFunction=P["a"].GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=D["a"].REPLACE,i.stencilMask=E["a"].CESIUM_3D_TILE_MASK|E["a"].SKIP_LOD_MASK,n.renderState=p["a"].fromCache(i),n}function X(t){const e=t.renderState.stencilTest.reference;return(e&E["a"].SKIP_LOD_MASK)>>>E["a"].SKIP_LOD_BIT_SHIFT}function $(t){const e=Object(o["a"])(t,!0);return e.cull.enabled=!1,e.depthTest.enabled=!0,e.depthMask=!1,e.blending=O["a"].ALPHA_BLEND,e.stencilTest=E["a"].setCesium3DTileBit(),e.stencilMask=E["a"].CESIUM_3D_TILE_MASK,p["a"].fromCache(e)}function Q(t){const e=Object(o["a"])(t,!0);return e.stencilTest=E["a"].setCesium3DTileBit(),e.stencilMask=E["a"].CESIUM_3D_TILE_MASK,p["a"].fromCache(e)}j.prototype.addDerivedCommands=function(t,e){const n=t.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,a=o.tileset,s=a._skipLevelOfDetail&&a._hasMixedContent&&t.context.stencilBuffer,l=U(this);for(let u=e;u<i;++u){const e=n[u];if(e.pass===b["a"].COMPUTE)continue;let i=e.derivedCommands.tileset;Object(c["a"])(i)&&!e.dirty||(i={},e.derivedCommands.tileset=i,i.originalCommand=q(e),e.dirty=!1);const h=i.originalCommand;l!==k.ALL_OPAQUE&&e.pass!==b["a"].TRANSLUCENT&&(Object(c["a"])(i.translucent)||(i.translucent=W(h))),l!==k.ALL_TRANSLUCENT&&e.pass!==b["a"].TRANSLUCENT&&(Object(c["a"])(i.opaque)||(i.opaque=H(h)),s&&(r||(Object(c["a"])(i.zback)||(i.zback=K(t.context,h)),a._backfaceCommands.push(i.zback)),Object(c["a"])(i.stencil)&&o._selectionDepth===X(i.stencil)||(e.renderState.depthMask?i.stencil=Y(h,o._selectionDepth):i.stencil=i.opaque)));const d=s?i.stencil:i.opaque,_=i.translucent;e.pass!==b["a"].TRANSLUCENT?(l===k.ALL_OPAQUE&&(n[u]=d),l===k.ALL_TRANSLUCENT&&(n[u]=_),l===k.OPAQUE_AND_TRANSLUCENT&&(n[u]=d,n.push(_))):n[u]=h}},j.prototype.update=function(t,e){this._batchTexture.update(t,e)},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),Object(u["a"])(this)},e["a"]=j},"73cd":function(t,e,n){"use strict";var i=n("dc1c"),o=n("535a"),r=n("2f63"),a=n("d4ed"),s=n("a5e0"),c=n("6928");function l(t){let e;if(this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,"string"===typeof t||t instanceof a["a"]){const n=a["a"].createIfNeeded(t);e=n.fetchJson(t)}else e=Promise.resolve(t);const n=this;this._readyPromise=e.then((function(t){return u(n,t),n}))}function u(t,e){e=Object(o["a"])(Object(i["a"])(e,!0),t._style),t._style=e,t.show=e.show,t.color=e.color,t.pointSize=e.pointSize,t.pointOutlineColor=e.pointOutlineColor,t.pointOutlineWidth=e.pointOutlineWidth,t.labelColor=e.labelColor,t.labelOutlineColor=e.labelOutlineColor,t.labelOutlineWidth=e.labelOutlineWidth,t.labelStyle=e.labelStyle,t.font=e.font,t.labelText=e.labelText,t.backgroundColor=e.backgroundColor,t.backgroundPadding=e.backgroundPadding,t.backgroundEnabled=e.backgroundEnabled,t.scaleByDistance=e.scaleByDistance,t.translucencyByDistance=e.translucencyByDistance,t.distanceDisplayCondition=e.distanceDisplayCondition,t.heightOffset=e.heightOffset,t.anchorLineEnabled=e.anchorLineEnabled,t.anchorLineColor=e.anchorLineColor,t.image=e.image,t.disableDepthTestDistance=e.disableDepthTestDistance,t.horizontalOrigin=e.horizontalOrigin,t.verticalOrigin=e.verticalOrigin,t.labelHorizontalOrigin=e.labelHorizontalOrigin,t.labelVerticalOrigin=e.labelVerticalOrigin;const n={};if(Object(r["a"])(e.meta)){const t=e.defines,i=Object(o["a"])(e.meta,o["a"].EMPTY_OBJECT);for(const e in i)i.hasOwnProperty(e)&&(n[e]=new c["a"](i[e],t))}t._meta=n,t._ready=!0}function h(t,e){const n=Object(o["a"])(t._style,o["a"].EMPTY_OBJECT).defines;if(Object(r["a"])(e))return"boolean"===typeof e||"number"===typeof e?new c["a"](String(e)):"string"===typeof e?new c["a"](e,n):Object(r["a"])(e.conditions)?new s["a"](e,n):e}function d(t){if(Object(r["a"])(t))return Object(r["a"])(t.expression)?t.expression:Object(r["a"])(t.conditionsExpression)?Object(i["a"])(t.conditionsExpression,!0):t}Object.defineProperties(l.prototype,{style:{get:function(){return this._style}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},show:{get:function(){return this._show},set:function(t){this._show=h(this,t),this._style.show=d(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){return this._color},set:function(t){this._color=h(this,t),this._style.color=d(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){return this._pointSize},set:function(t){this._pointSize=h(this,t),this._style.pointSize=d(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(t){this._pointOutlineColor=h(this,t),this._style.pointOutlineColor=d(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=h(this,t),this._style.pointOutlineWidth=d(this._pointOutlineWidth)}},labelColor:{get:function(){return this._labelColor},set:function(t){this._labelColor=h(this,t),this._style.labelColor=d(this._labelColor)}},labelOutlineColor:{get:function(){return this._labelOutlineColor},set:function(t){this._labelOutlineColor=h(this,t),this._style.labelOutlineColor=d(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){return this._labelOutlineWidth},set:function(t){this._labelOutlineWidth=h(this,t),this._style.labelOutlineWidth=d(this._labelOutlineWidth)}},font:{get:function(){return this._font},set:function(t){this._font=h(this,t),this._style.font=d(this._font)}},labelStyle:{get:function(){return this._labelStyle},set:function(t){this._labelStyle=h(this,t),this._style.labelStyle=d(this._labelStyle)}},labelText:{get:function(){return this._labelText},set:function(t){this._labelText=h(this,t),this._style.labelText=d(this._labelText)}},backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=h(this,t),this._style.backgroundColor=d(this._backgroundColor)}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(t){this._backgroundPadding=h(this,t),this._style.backgroundPadding=d(this._backgroundPadding)}},backgroundEnabled:{get:function(){return this._backgroundEnabled},set:function(t){this._backgroundEnabled=h(this,t),this._style.backgroundEnabled=d(this._backgroundEnabled)}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){this._scaleByDistance=h(this,t),this._style.scaleByDistance=d(this._scaleByDistance)}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){this._translucencyByDistance=h(this,t),this._style.translucencyByDistance=d(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){this._distanceDisplayCondition=h(this,t),this._style.distanceDisplayCondition=d(this._distanceDisplayCondition)}},heightOffset:{get:function(){return this._heightOffset},set:function(t){this._heightOffset=h(this,t),this._style.heightOffset=d(this._heightOffset)}},anchorLineEnabled:{get:function(){return this._anchorLineEnabled},set:function(t){this._anchorLineEnabled=h(this,t),this._style.anchorLineEnabled=d(this._anchorLineEnabled)}},anchorLineColor:{get:function(){return this._anchorLineColor},set:function(t){this._anchorLineColor=h(this,t),this._style.anchorLineColor=d(this._anchorLineColor)}},image:{get:function(){return this._image},set:function(t){this._image=h(this,t),this._style.image=d(this._image)}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){this._disableDepthTestDistance=h(this,t),this._style.disableDepthTestDistance=d(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(t){this._horizontalOrigin=h(this,t),this._style.horizontalOrigin=d(this._horizontalOrigin)}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(t){this._verticalOrigin=h(this,t),this._style.verticalOrigin=d(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){return this._labelHorizontalOrigin},set:function(t){this._labelHorizontalOrigin=h(this,t),this._style.labelHorizontalOrigin=d(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){return this._labelVerticalOrigin},set:function(t){this._labelVerticalOrigin=h(this,t),this._style.labelVerticalOrigin=d(this._labelVerticalOrigin)}},meta:{get:function(){return this._meta},set:function(t){this._meta=t}}}),l.prototype.getColorShaderFunction=function(t,e,n){return this._colorShaderFunctionReady?(n.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,Object(r["a"])(this.color)&&Object(r["a"])(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(t,e,n,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=n.translucent,this._colorShaderFunction)},l.prototype.getShowShaderFunction=function(t,e,n){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,Object(r["a"])(this.show)&&Object(r["a"])(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(t,e,n,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},l.prototype.getPointSizeShaderFunction=function(t,e,n){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(t,e,n,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},l.prototype.getVariables=function(){let t=[];return Object(r["a"])(this.color)&&Object(r["a"])(this.color.getVariables)&&t.push.apply(t,this.color.getVariables()),Object(r["a"])(this.show)&&Object(r["a"])(this.show.getVariables)&&t.push.apply(t,this.show.getVariables()),Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getVariables)&&t.push.apply(t,this.pointSize.getVariables()),t=t.filter((function(t,e,n){return n.indexOf(t)===e})),t},e["a"]=l},7950:function(t,e,n){"use strict";var i=n("bef8"),o=n("bd8d"),r=n("535a"),a=n("2f63"),s=n("5af0"),c=n("add9");function l(t,e,n,i,o){this._content=t,this._billboard=n,this._label=i,this._polyline=o,this._batchId=e,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),h(this)}const u=new i["a"];function h(t){const e=t._billboard;if(Object(a["a"])(t._billboardImage)&&t._billboardImage!==e.image)return void(e.image=t._billboardImage);if(Object(a["a"])(t._billboardImage))return;const n=Object(r["a"])(t._color,l.defaultColor),i=Object(r["a"])(t._pointOutlineColor,l.defaultPointOutlineColor),s=Object(r["a"])(t._pointOutlineWidth,l.defaultPointOutlineWidth),u=Object(r["a"])(t._pointSize,l.defaultPointSize),h=t._billboardColor,d=t._billboardOutlineColor,_=t._billboardOutlineWidth,f=t._billboardSize;if(o["a"].equals(n,h)&&o["a"].equals(i,d)&&s===_&&u===f)return;t._billboardColor=o["a"].clone(n,t._billboardColor),t._billboardOutlineColor=o["a"].clone(i,t._billboardOutlineColor),t._billboardOutlineWidth=s,t._billboardSize=u;const b=n.alpha,p=n.toCssColorString(),g=i.toCssColorString(),m=JSON.stringify([p,u,g,s]);e.setImage(m,Object(c["a"])(b,p,g,s,u))}Object.defineProperties(l.prototype,{show:{get:function(){return this._label.show},set:function(t){this._label.show=t,this._billboard.show=t,this._polyline.show=t}},color:{get:function(){return this._color},set:function(t){this._color=o["a"].clone(t,this._color),h(this)}},pointSize:{get:function(){return this._pointSize},set:function(t){this._pointSize=t,h(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(t){this._pointOutlineColor=o["a"].clone(t,this._pointOutlineColor),h(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=t,h(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(t){this._label.fillColor=t,this._polyline.show=this._label.show&&t.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(t){this._label.outlineColor=t}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(t){this._label.outlineWidth=t}},font:{get:function(){return this._label.font},set:function(t){this._label.font=t}},labelStyle:{get:function(){return this._label.style},set:function(t){this._label.style=t}},labelText:{get:function(){return this._label.text},set:function(t){Object(a["a"])(t)||(t=""),this._label.text=t}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(t){this._label.backgroundColor=t}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(t){this._label.backgroundPadding=t}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(t){this._label.showBackground=t}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(t){this._label.scaleByDistance=t,this._billboard.scaleByDistance=t}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(t){this._label.translucencyByDistance=t,this._billboard.translucencyByDistance=t}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(t){this._label.distanceDisplayCondition=t,this._polyline.distanceDisplayCondition=t,this._billboard.distanceDisplayCondition=t}},heightOffset:{get:function(){return this._heightOffset},set:function(t){const e=Object(r["a"])(this._heightOffset,0),n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,u);i.height=i.height-e+t;const o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=t}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(t){this._polyline.show=t}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(t){this._polyline.material.uniforms.color=o["a"].clone(t,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(t){const e=this._billboardImage!==t;this._billboardImage=t,e&&h(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(t){this._label.disableDepthTestDistance=t,this._billboard.disableDepthTestDistance=t}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(t){this._billboard.horizontalOrigin=t}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(t){this._billboard.verticalOrigin=t}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(t){this._label.horizontalOrigin=t}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(t){this._label.verticalOrigin=t}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const t=this._pickIds;return t[0]=this._billboard.pickId,t[1]=this._label.pickId,t[2]=this._polyline.pickId,t}}}),l.defaultColor=o["a"].WHITE,l.defaultPointOutlineColor=o["a"].BLACK,l.defaultPointOutlineWidth=0,l.defaultPointSize=8,l.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},l.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},l.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},l.prototype.getPropertyInherited=function(t){return s["a"].getPropertyInherited(this._content,this._batchId,t)},l.prototype.setProperty=function(t,e){this._content.batchTable.setProperty(this._batchId,t,e),this._content.featurePropertiesDirty=!0},l.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},l.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},l.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},e["a"]=l},"7abe":function(t,e,n){"use strict";const i={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};e["a"]=Object.freeze(i)},9889:function(t,e,n){"use strict";var i=n("abab"),o=n("535a"),r=n("2f63");function a(t,e){this.json=t,this.buffer=e,this._cachedTypedArrays={},this.featuresLength=0}function s(t,e,n,o,a,s){const c=t._cachedTypedArrays;let l=c[e];return Object(r["a"])(l)||(l=i["a"].createArrayBufferView(n,t.buffer.buffer,t.buffer.byteOffset+s,a*o),c[e]=l),l}function c(t,e,n,o){const a=t._cachedTypedArrays;let s=a[e];return Object(r["a"])(s)||(s=i["a"].createTypedArray(n,o),a[e]=s),s}a.prototype.getGlobalProperty=function(t,e,n){const a=this.json[t];if(Object(r["a"])(a))return Object(r["a"])(a.byteOffset)?(e=Object(o["a"])(e,i["a"].UNSIGNED_INT),n=Object(o["a"])(n,1),s(this,t,e,n,1,a.byteOffset)):a},a.prototype.hasProperty=function(t){return Object(r["a"])(this.json[t])},a.prototype.getPropertyArray=function(t,e,n){const o=this.json[t];if(Object(r["a"])(o))return Object(r["a"])(o.byteOffset)?(Object(r["a"])(o.componentType)&&(e=i["a"].fromName(o.componentType)),s(this,t,e,n,this.featuresLength,o.byteOffset)):c(this,t,e,o)},a.prototype.getProperty=function(t,e,n,i,o){const a=this.json[t];if(!Object(r["a"])(a))return;const s=this.getPropertyArray(t,e,n);if(1===n)return s[i];for(let r=0;r<n;++r)o[r]=s[n*i+r];return o},e["a"]=a},"9c94":function(t,e,n){"use strict";var i=n("61aa"),o=n("c2ce"),r=n("09e7"),a=n("c3ff"),s=n("490e"),c=n("a994"),l=n("3995"),u=n("364c"),h=n("283e"),d=n("3f56");const _={b3dm:function(t,e,n,o,r){return t.enableModelExperimental?d["a"].fromB3dm(t,e,n,o,r):new i["a"](t,e,n,o,r)},pnts:function(t,e,n,i,o){return t.enableModelExperimental?d["a"].fromPnts(t,e,n,i,o):new c["a"](t,e,n,i,o)},i3dm:function(t,e,n,i,o){return t.enableModelExperimental?d["a"].fromI3dm(t,e,n,i,o):new s["a"](t,e,n,i,o)},cmpt:function(t,e,n,i,r){return new o["a"](t,e,n,i,r,_)},externalTileset:function(t,e,n,i){return new l["a"](t,e,n,i)},geom:function(t,e,n,i,o){return new r["a"](t,e,n,i,o)},vctr:function(t,e,n,i,o){return new u["a"](t,e,n,i,o)},subt:function(t,e,n,i,o){return new a["a"](t,e,n,void 0,i,o)},subtreeJson:function(t,e,n,i){return new a["a"](t,e,n,i)},glb:function(t,e,n,i,o){const r=i.byteLength;if(r<12)throw new h["a"]("Invalid glb content");const a=new DataView(i,o),s=a.getUint32(8,!0),c=new Uint8Array(i,o,s);return d["a"].fromGltf(t,e,n,c)},gltf:function(t,e,n,i){return d["a"].fromGltf(t,e,n,i)}};e["a"]=_},"9e51":function(t,e,n){"use strict";var i=n("2f63");function o(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(o.prototype,{style:{get:function(){return this._style},set:function(t){t!==this._style&&(this._style=t,this._styleDirty=!0)}}}),o.prototype.makeDirty=function(){this._styleDirty=!0},o.prototype.resetDirty=function(){this._styleDirty=!1},o.prototype.applyStyle=function(t){if(!t.ready)return;if(Object(i["a"])(this._style)&&!this._style.ready)return;const e=this._styleDirty;e&&++this._lastStyleTime;const n=this._lastStyleTime,o=t._statistics,r=e?t._selectedTiles:t._selectedTilesToStyle,a=r.length;for(let i=0;i<a;++i){const t=r[i];if(t.lastStyleTime!==n){const e=t.content;t.lastStyleTime=n,e.applyStyle(this._style),o.numberOfFeaturesStyled+=e.featuresLength,++o.numberOfTilesStyled}}},e["a"]=o},"9f0f":function(t,e,n){"use strict";var i=n("be18"),o=n("6380"),r=n("1ec0"),a=n("8cfb");const s={},c=new i["a"];s.checkChildrenWithinParent=function(t){const e=t.children,n=e.length,s=t.boundingVolume;if(s instanceof a["a"]||s instanceof r["a"]){const l=s._orientedBoundingBox;t._optimChildrenWithinParent=o["a"].USE_OPTIMIZATION;for(let s=0;s<n;++s){const n=e[s],u=n.boundingVolume;if(!(u instanceof a["a"]||u instanceof r["a"])){t._optimChildrenWithinParent=o["a"].SKIP_OPTIMIZATION;break}const h=u._orientedBoundingBox,d=i["a"].subtract(h.center,l.center,c),_=i["a"].magnitude(d);i["a"].divideByScalar(d,_,d);const f=Math.abs(l.halfAxes[0]*d.x)+Math.abs(l.halfAxes[1]*d.y)+Math.abs(l.halfAxes[2]*d.z)+Math.abs(l.halfAxes[3]*d.x)+Math.abs(l.halfAxes[4]*d.y)+Math.abs(l.halfAxes[5]*d.z)+Math.abs(l.halfAxes[6]*d.x)+Math.abs(l.halfAxes[7]*d.y)+Math.abs(l.halfAxes[8]*d.z),b=Math.abs(h.halfAxes[0]*d.x)+Math.abs(h.halfAxes[1]*d.y)+Math.abs(h.halfAxes[2]*d.z)+Math.abs(h.halfAxes[3]*d.x)+Math.abs(h.halfAxes[4]*d.y)+Math.abs(h.halfAxes[5]*d.z)+Math.abs(h.halfAxes[6]*d.x)+Math.abs(h.halfAxes[7]*d.y)+Math.abs(h.halfAxes[8]*d.z);if(f<=b+_){t._optimChildrenWithinParent=o["a"].SKIP_OPTIMIZATION;break}}}return t._optimChildrenWithinParent===o["a"].USE_OPTIMIZATION},e["a"]=s},c0a9:function(t,e,n){"use strict";var i=n("cef5"),o=n("be18"),r=n("bd8d"),a=n("9541"),s=n("2384"),c=n("535a"),l=n("9c35"),u=n("2f63"),h=n("45c5"),d=n("7d62"),_=n("c52f"),f=n("66bf"),b=n("5ed2"),p=n("93da"),g=n("df07"),m=n("52f0"),y=n("78e5"),O=n("713f"),S=n("eace"),C=n("de66"),T=n("75b2"),E=n("8a39"),P=n("b82e"),D=n("d4ed"),v=n("283e"),I=n("7d93"),j=n("9c94"),w=n("7abe"),x=n("5457"),R=n("6380"),L=n("d150"),V=n("c4a1"),A=n("c872"),B=n("9a79"),M=n("80f9"),N=n("7870"),z=n("55d8"),F=n("0a70"),k=n("40ef"),U=n("a307"),q=n("1ec0"),W=n("1c25"),H=n("eb1f"),G=n("8cfb"),K=n("d289");function Y(t,e,n,i){this._tileset=t,this._header=n;const o=Object(u["a"])(n.contents),a=o&&n.contents.length>1||Object(z["a"])(n,"3DTILES_multiple_contents"),s=o&&!a?n.contents[0]:n.content;this.transform=Object(u["a"])(n.transform)?m["a"].unpack(n.transform):m["a"].clone(m["a"].IDENTITY);const c=Object(u["a"])(i)?i.computedTransform:t.modelMatrix,l=m["a"].multiply(c,this.transform,new m["a"]),h=Object(u["a"])(i)?i._initialTransform:m["a"].IDENTITY;let d,_,f,p;this._initialTransform=m["a"].multiply(h,this.transform,new m["a"]),this.computedTransform=l,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,l),this._boundingVolume2D=void 0,Object(u["a"])(s)&&Object(u["a"])(s.boundingVolume)&&(d=this.createBoundingVolume(s.boundingVolume,l)),this._contentBoundingVolume=d,this._contentBoundingVolume2D=void 0,Object(u["a"])(n.viewerRequestVolume)&&(_=this.createBoundingVolume(n.viewerRequestVolume,l)),this._viewerRequestVolume=_,this.geometricError=n.geometricError,this._geometricError=n.geometricError,Object(u["a"])(this._geometricError)||(this._geometricError=Object(u["a"])(i)?i.geometricError:t._geometricError,Y._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),Object(u["a"])(n.refine)?("replace"!==n.refine&&"add"!==n.refine||Y._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),f="REPLACE"===n.refine.toUpperCase()?V["a"].REPLACE:V["a"].ADD):f=Object(u["a"])(i)?i.refine:V["a"].REPLACE,this.refine=f,this.children=[],this.parent=i;let g,y,O,S=!1;if(e=D["a"].createIfNeeded(e),a)g=w["a"].UNLOADED,y=e.clone();else if(Object(u["a"])(s)){let t=s.uri;Object(u["a"])(s.url)&&(Y._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),t=s.url),g=w["a"].UNLOADED,y=e.getDerivedResource({url:t}),O=T["a"].getServerKey(y.getUrlComponent())}else p=new A["a"](t,this),S=!0,g=w["a"].READY;this._content=p,this._contentResource=y,this._contentState=g,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=O,this.hasEmptyContent=S,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=a,this.metadata=Object(N["a"])(t,n),this.cacheNode=void 0;const C=n.expire;let E,P;Object(u["a"])(C)&&(E=C.duration,Object(u["a"])(C.date)&&(P=b["a"].fromIso8601(C.date))),this.expireDuration=E,this.expireDate=P,this.lastStyleTime=0,this._optimChildrenWithinParent=R["a"].NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=r["a"].fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new b["a"],this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}Y._deprecationWarning=h["a"],Object.defineProperties(Y.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return Object(c["a"])(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return Object(u["a"])(this._color)||(this._color=new r["a"]),r["a"].clone(this._color)},set:function(t){this._color=r["a"].clone(t,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent||Object(u["a"])(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===w["a"].READY}},contentUnloaded:{get:function(){return this._contentState===w["a"].UNLOADED}},contentExpired:{get:function(){return this._contentState===w["a"].EXPIRED}},contentFailed:{get:function(){return this._contentState===w["a"].FAILED}},contentReadyToProcessPromise:{get:function(){if(Object(u["a"])(this._contentReadyToProcessPromise))return this._contentReadyToProcessPromise.promise}},contentReadyPromise:{get:function(){if(Object(u["a"])(this._contentReadyPromise))return this._contentReadyPromise.promise}},commandsLength:{get:function(){return this._commandsLength}}});const X=new o["a"];function $(t,e){const n=t._tileset,i=e.camera,r=t.boundingSphere,a=r.radius,s=o["a"].multiplyByScalar(i.directionWC,t._centerZDepth,X),c=o["a"].add(i.positionWC,s,X),l=o["a"].subtract(c,r.center,X),h=o["a"].magnitude(l),d=h>a;if(d){const e=o["a"].normalize(l,X),n=o["a"].multiplyByScalar(e,a,X),s=o["a"].add(r.center,n,X),c=o["a"].subtract(s,i.positionWC,X),u=o["a"].normalize(c,X);t._foveatedFactor=1-Math.abs(o["a"].dot(i.directionWC,u))}else t._foveatedFactor=0;const _=t.refine===V["a"].REPLACE,f=n._skipLevelOfDetail;if(_&&!f||!n.foveatedScreenSpaceError||1===n.foveatedConeSize||t._priorityProgressiveResolution&&_&&f||n._pass===L["a"].PRELOAD_FLIGHT||n._pass===L["a"].PRELOAD)return!1;const b=1-Math.cos(.5*i.frustum.fov),g=n.foveatedConeSize*b;if(t._foveatedFactor<=g)return!1;const m=b-g,y=p["a"].clamp((t._foveatedFactor-g)/m,0,1),O=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.maximumScreenSpaceError,y),S=0===t._screenSpaceError&&Object(u["a"])(t.parent)?.5*t.parent._screenSpaceError:t._screenSpaceError;return n.maximumScreenSpaceError-O<=S}const Q=new b["a"];function J(t,e){if(t.progressiveResolutionHeightFraction<=0||t.progressiveResolutionHeightFraction>.5)return!1;let n=e._screenSpaceErrorProgressiveResolution>t._maximumScreenSpaceError;e._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const i=e.parent,o=t._maximumScreenSpaceError,r=e._screenSpaceErrorProgressiveResolution<=o,a=Object(u["a"])(i)&&i._screenSpaceErrorProgressiveResolution>o;return r&&a&&(e._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,n=!0),n}function Z(t,e){const n=e.parent,i=Object(u["a"])(n)&&(!t._skipLevelOfDetail||0===e._screenSpaceError||n.hasTilesetContent||n.hasImplicitContent),o=i?n._screenSpaceError:e._screenSpaceError;return t.root._screenSpaceError-o}function tt(t){if(Object(u["a"])(t.expireDuration)){const e=b["a"].now(Q);b["a"].addSeconds(e,t.expireDuration,e),Object(u["a"])(t.expireDate)?b["a"].lessThan(t.expireDate,e)&&b["a"].clone(e,t.expireDate):t.expireDate=b["a"].clone(e)}}function et(t){return function(){return t._priority}}function nt(t){let e=t._content;const n=t._tileset;if(!Object(u["a"])(e)){const i=Object(z["a"])(t._header,"3DTILES_multiple_contents")?t._header.extensions["3DTILES_multiple_contents"]:t._header;e=new F["a"](n,t,t._contentResource.clone(),i),t._content=e}const i=e.requestInnerContents();return i>0?i:(t._contentState=w["a"].LOADING,t._contentReadyToProcessPromise=Object(l["a"])(),t._contentReadyPromise=Object(l["a"])(),e.contentsFetchedPromise.then((function(){if(t._contentState===w["a"].LOADING){if(!t.isDestroyed())return t._contentState=w["a"].PROCESSING,t._contentReadyToProcessPromise.resolve(e),e.readyPromise.then((function(e){t.isDestroyed()?it(t,n,"Tile was unloaded while content was processing"):(t._selectedFrame=0,t.lastStyleTime=0,b["a"].now(t._loadTimestamp),t._contentState=w["a"].READY,t._contentReadyPromise.resolve(e))}));it(t,n,"Tile was unloaded while content was loading")}})).catch((function(e){it(t,n,e)})),0)}function it(t,e,n){t._contentState===w["a"].PROCESSING&&--e.statistics.numberOfTilesProcessing,t._contentState=w["a"].FAILED,t._contentReadyPromise.reject(n),t._contentReadyToProcessPromise.reject(n)}function ot(t){const e=t._contentResource.clone(),n=t.contentExpired;n&&e.setQueryParameters({expired:t.expireDate.toString()});const i=new C["a"]({throttle:!0,throttleByServer:!0,type:P["a"].TILES3D,priorityFunction:et(t),serverKey:t._serverKey});t._request=i,e.request=i;const o=e.fetchArrayBuffer();if(!Object(u["a"])(o))return 1;const r=t._contentState,a=t._tileset;return t._contentState=w["a"].LOADING,t._contentReadyToProcessPromise=Object(l["a"])(),t._contentReadyPromise=Object(l["a"])(),++a.statistics.numberOfPendingRequests,o.then((function(e){if(t.isDestroyed())return void rt(t,a);const i=at(t,e);return n&&(t.expireDate=void 0),t._content=i,t._contentState=w["a"].PROCESSING,t._contentReadyToProcessPromise.resolve(i),--a.statistics.numberOfPendingRequests,i.readyPromise.then((function(e){t.isDestroyed()?rt(t,a):(tt(t),t._selectedFrame=0,t.lastStyleTime=0,b["a"].now(t._loadTimestamp),t._contentState=w["a"].READY,t._contentReadyPromise.resolve(e))}))})).catch((function(e){if(i.state===E["a"].CANCELLED)return t._contentState=r,--a.statistics.numberOfPendingRequests,void++a.statistics.numberOfAttemptedRequests;rt(t,a,e)})),0}function rt(t,e,n){t._contentState===w["a"].PROCESSING?--e.statistics.numberOfTilesProcessing:--e.statistics.numberOfPendingRequests,t._contentState=w["a"].FAILED,t._contentReadyPromise.reject(n),t._contentReadyToProcessPromise.reject(n)}function at(t,e){const n=Object(k["a"])(e),i=t._tileset;let o;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===x["a"].GEOMETRY||n.contentType===x["a"].VECTOR,n.contentType!==x["a"].IMPLICIT_SUBTREE&&n.contentType!==x["a"].IMPLICIT_SUBTREE_JSON||(t.hasImplicitContent=!0),n.contentType===x["a"].EXTERNAL_TILESET&&(t.hasTilesetContent=!0);const r=j["a"][n.contentType];o=Object(u["a"])(n.binaryPayload)?r(i,t,t._contentResource,n.binaryPayload.buffer,0):r(i,t,t._contentResource,n.jsonPayload);const a=Object(u["a"])(t._header.contents)?t._header.contents[0]:t._header.content;if(t.hasImplicitContentMetadata){const e=t.implicitSubtree,n=t.implicitCoordinates;o.metadata=e.getContentMetadataView(n,0)}else t.hasImplicitContent||(o.metadata=Object(B["a"])(i,a));const s=Object(M["a"])(i,a);return Object(u["a"])(s)&&(o.group=new I["a"]({metadata:s})),o}Y.prototype.getScreenSpaceError=function(t,e,n){const i=this._tileset,o=Object(c["a"])(n,1),r=Object(u["a"])(this.parent)?this.parent.geometricError:i._geometricError,a=e?r:this.geometricError;if(0===a)return 0;const s=t.camera;let l=s.frustum;const h=t.context,d=h.drawingBufferWidth,_=h.drawingBufferHeight*o;let f;if(t.mode===U["a"].SCENE2D||l instanceof O["a"]){Object(u["a"])(l._offCenterFrustum)&&(l=l._offCenterFrustum);const t=Math.max(l.top-l.bottom,l.right-l.left)/Math.max(d,_);f=a/t}else{const t=Math.max(this._distanceToCamera,p["a"].EPSILON7),e=s.frustum.sseDenominator;if(f=a*_/(t*e),i.dynamicScreenSpaceError){const e=i._dynamicScreenSpaceErrorComputedDensity,n=i.dynamicScreenSpaceErrorFactor,o=p["a"].fog(t,e)*n;f-=o}}return f/=t.pixelRatio,f},Y.prototype.updateVisibility=function(t){const e=this.parent,n=this._tileset,i=Object(u["a"])(e)?e.computedTransform:n.modelMatrix,o=Object(u["a"])(e)?e._visibilityPlaneMask:s["a"].MASK_INDETERMINATE;this.updateTransform(i),this._distanceToCamera=this.distanceToTile(t),this._centerZDepth=this.distanceToTileCenter(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(t,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(t,o),this._visible=this._visibilityPlaneMask!==s["a"].MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._priorityReverseScreenSpaceError=Z(n,this),this._priorityProgressiveResolution=J(n,this),this.priorityDeferred=$(this,t)},Y.prototype.updateExpiration=function(){if(Object(u["a"])(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const t=b["a"].now(Q);b["a"].lessThan(this.expireDate,t)&&(this._contentState=w["a"].EXPIRED,this._expiredContent=this._content)}},Y.prototype.requestContent=function(){return this.hasEmptyContent?0:this.hasMultipleContents?nt(this):ot(this)},Y.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},Y.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||this.hasImplicitContent||(this._content=this._content&&this._content.destroy(),this._contentState=w["a"].UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const st=new i["a"];function ct(t,e){if(e.mode!==U["a"].SCENE3D&&!Object(u["a"])(t._boundingVolume2D)){const n=t._boundingVolume.boundingSphere,o=i["a"].projectTo2D(n,e.mapProjection,st);t._boundingVolume2D=new H["a"](o.center,o.radius)}return e.mode!==U["a"].SCENE3D?t._boundingVolume2D:t._boundingVolume}function lt(t,e){if(e.mode!==U["a"].SCENE3D&&!Object(u["a"])(t._contentBoundingVolume2D)){const n=t._contentBoundingVolume.boundingSphere,o=i["a"].projectTo2D(n,e.mapProjection,st);t._contentBoundingVolume2D=new H["a"](o.center,o.radius)}return e.mode!==U["a"].SCENE3D?t._contentBoundingVolume2D:t._contentBoundingVolume}Y.prototype.visibility=function(t,e){const n=t.cullingVolume,i=ct(this,t),o=this._tileset,r=o.clippingPlanes;if(Object(u["a"])(r)&&r.enabled){const t=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=t!==f["a"].INSIDE,t===f["a"].OUTSIDE)return s["a"].MASK_OUTSIDE}return n.computeVisibilityWithPlaneMask(i,e)},Y.prototype.contentVisibility=function(t){if(!Object(u["a"])(this._contentBoundingVolume))return f["a"].INSIDE;if(this._visibilityPlaneMask===s["a"].MASK_INSIDE)return f["a"].INSIDE;const e=t.cullingVolume,n=lt(this,t),i=this._tileset,o=i.clippingPlanes;if(Object(u["a"])(o)&&o.enabled){const t=o.computeIntersectionWithBoundingVolume(n,i.clippingPlanesOriginMatrix);if(this._isClipped=t!==f["a"].INSIDE,t===f["a"].OUTSIDE)return f["a"].OUTSIDE}return e.computeVisibility(n)},Y.prototype.distanceToTile=function(t){const e=ct(this,t);return e.distanceToCamera(t)};const ut=new o["a"];Y.prototype.distanceToTileCenter=function(t){const e=ct(this,t),n=e.boundingVolume,i=o["a"].subtract(n.center,t.camera.positionWC,ut);return o["a"].dot(t.camera.directionWC,i)},Y.prototype.insideViewerRequestVolume=function(t){const e=this._viewerRequestVolume;return!Object(u["a"])(e)||0===e.distanceToCamera(t)};const ht=new g["a"],dt=new o["a"],_t=new g["a"],ft=new o["a"],bt=new S["a"],pt=new y["a"],gt=new m["a"];function mt(t,e,n){let i=o["a"].fromElements(t[0],t[1],t[2],ft),r=g["a"].fromArray(t,3,_t);i=m["a"].multiplyByPoint(e,i,i);const a=m["a"].getMatrix3(e,ht);return r=g["a"].multiply(a,r,r),Object(u["a"])(n)?(n.update(i,r),n):new G["a"](i,r)}function yt(t,e,n,i){const o=S["a"].unpack(t,0,bt),r=t[4],a=t[5],s=y["a"].fromRectangle(o,r,a,_["a"].WGS84,pt);let c=s.center,l=s.halfAxes;e=m["a"].multiplyTransformation(e,m["a"].inverseTransformation(n,gt),gt),c=m["a"].multiplyByPoint(e,c,c);const h=m["a"].getMatrix3(e,ht);return l=g["a"].multiply(h,l,l),Object(u["a"])(i)&&i instanceof G["a"]?(i.update(c,l),i):new G["a"](c,l)}function Ot(t,e,n,i){if(!m["a"].equalsEpsilon(e,n,p["a"].EPSILON8))return yt(t,e,n,i);if(Object(u["a"])(i))return i;const o=S["a"].unpack(t,0,bt);return new q["a"]({rectangle:o,minimumHeight:t[4],maximumHeight:t[5]})}function St(t,e,n){let i=o["a"].fromElements(t[0],t[1],t[2],ft),r=t[3];i=m["a"].multiplyByPoint(e,i,i);const a=m["a"].getScale(e,dt),s=o["a"].maximumComponent(a);return r*=s,Object(u["a"])(n)?(n.update(i,r),n):new H["a"](i,r)}function Ct(t,e,n,i){if(!i.isRender)return;const o=Object(u["a"])(t._header.content)&&Object(u["a"])(t._header.content.boundingVolume),s=t.hasEmptyContent||t.hasTilesetContent||t.hasImplicitContent,c=e.debugShowBoundingVolume||e.debugShowContentBoundingVolume&&!o;if(c){let e;e=t._finalResolution?s?r["a"].DARKGRAY:r["a"].WHITE:r["a"].YELLOW,Object(u["a"])(t._debugBoundingVolume)||(t._debugBoundingVolume=t._boundingVolume.createDebugVolume(e)),t._debugBoundingVolume.update(n);const i=t._debugBoundingVolume.getGeometryInstanceAttributes("outline");i.color=a["a"].toValue(e,i.color)}else!c&&Object(u["a"])(t._debugBoundingVolume)&&(t._debugBoundingVolume=t._debugBoundingVolume.destroy());e.debugShowContentBoundingVolume&&o?(Object(u["a"])(t._debugContentBoundingVolume)||(t._debugContentBoundingVolume=t._contentBoundingVolume.createDebugVolume(r["a"].BLUE)),t._debugContentBoundingVolume.update(n)):!e.debugShowContentBoundingVolume&&Object(u["a"])(t._debugContentBoundingVolume)&&(t._debugContentBoundingVolume=t._debugContentBoundingVolume.destroy()),e.debugShowViewerRequestVolume&&Object(u["a"])(t._viewerRequestVolume)?(Object(u["a"])(t._debugViewerRequestVolume)||(t._debugViewerRequestVolume=t._viewerRequestVolume.createDebugVolume(r["a"].YELLOW)),t._debugViewerRequestVolume.update(n)):!e.debugShowViewerRequestVolume&&Object(u["a"])(t._debugViewerRequestVolume)&&(t._debugViewerRequestVolume=t._debugViewerRequestVolume.destroy());const l=e.debugColorizeTiles&&!t._debugColorizeTiles||Object(u["a"])(e._heatmap.tilePropertyName),h=!e.debugColorizeTiles&&t._debugColorizeTiles;l?(e._heatmap.colorize(t,n),t._debugColorizeTiles=!0,t.color=t._debugColor):h&&(t._debugColorizeTiles=!1,t.color=r["a"].WHITE),t._colorDirty&&(t._colorDirty=!1,t._content.applyDebugSettings(!0,t._color)),h&&e.makeStyleDirty()}function Tt(t,e,n){const i=t._content,o=t._expiredContent;if(!t.hasMultipleContents&&Object(u["a"])(o)){if(!t.contentReady)return void o.update(e,n);t._expiredContent.destroy(),t._expiredContent=void 0}i.update(e,n)}function Et(t,e){const n=e.clippingPlanes;let i=0;Object(u["a"])(n)&&t._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==t._clippingPlanesState&&(t._clippingPlanesState=i,t.clippingPlanesDirty=!0)}Y.prototype.createBoundingVolume=function(t,e,n){if(!Object(u["a"])(t))throw new v["a"]("boundingVolume must be defined");if(Object(z["a"])(t,"3DTILES_bounding_volume_S2"))return new W["a"](t.extensions["3DTILES_bounding_volume_S2"]);if(Object(u["a"])(t.box))return mt(t.box,e,n);if(Object(u["a"])(t.region))return Ot(t.region,e,this._initialTransform,n);if(Object(u["a"])(t.sphere))return St(t.sphere,e,n);throw new v["a"]("boundingVolume must contain a sphere, region, or box")},Y.prototype.updateTransform=function(t){t=Object(c["a"])(t,m["a"].IDENTITY);const e=m["a"].multiply(t,this.transform,gt),n=!m["a"].equals(e,this.computedTransform);if(!n)return;m["a"].clone(e,this.computedTransform);const i=this._header,o=this._header.content;this._boundingVolume=this.createBoundingVolume(i.boundingVolume,this.computedTransform,this._boundingVolume),Object(u["a"])(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(o.boundingVolume,this.computedTransform,this._contentBoundingVolume)),Object(u["a"])(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(i.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},Y.prototype.updateGeometricErrorScale=function(){const t=m["a"].getScale(this.computedTransform,dt),e=o["a"].maximumComponent(t);this.geometricError=this._geometricError*e},Y.prototype.update=function(t,e,n){const i=e.commandList.length;Et(this,t),Ct(this,t,e,n),Tt(this,t,e);const o=e.commandList.length,r=o-i;this._commandsLength=r;for(let a=0;a<r;++a){const t=e.commandList[i+a],n=t.pass===K["a"].TRANSLUCENT;t.depthForTranslucentClassification=n}this.clippingPlanesDirty=!1};const Pt=[];function Dt(t,e,n){const i=t*Math.pow(10,e),o=parseInt(i);return o*Math.pow(10,n)}function vt(t,e,n){return Math.max(p["a"].normalize(t,e,n)-p["a"].EPSILON7,0)}Y.prototype.process=function(t,e){const n=e.commandList;e.commandList=Pt,this._content.update(t,e),Pt.length=0,e.commandList=n},Y.prototype.updatePriority=function(){const t=this.tileset,e=t.preferLeaves,n=t._minimumPriority,i=t._maximumPriority,o=4,r=1,a=0,s=o,c=a+s,l=o,u=c+l,h=r,d=Math.pow(10,u),_=u+h,f=r,b=Math.pow(10,_),p=_+f,g=Math.pow(10,p);let m=vt(this._depth,n.depth,i.depth);m=e?1-m:m;const y=!t._skipLevelOfDetail&&this.refine===V["a"].REPLACE,O=y?vt(this._priorityHolder._distanceToCamera,n.distance,i.distance):vt(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError),S=Dt(O,s,a),C=this._priorityProgressiveResolution?0:d,T=vt(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),E=Dt(T,l,c),P=this.priorityDeferred?b:0,D=t._pass===L["a"].PRELOAD_FLIGHT?0:g;this._priority=m+S+C+E+P+D},Y.prototype.isDestroyed=function(){return!1},Y.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),Object(d["a"])(this)},e["a"]=Y},c4a1:function(t,e,n){"use strict";const i={ADD:0,REPLACE:1};e["a"]=Object.freeze(i)},d150:function(t,e,n){"use strict";var i=n("8981"),o=n("859c");const r={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},a=new Array(r.NUMBER_OF_PASSES);a[r.RENDER]=Object.freeze({traversal:o["a"],isRender:!0,requestTiles:!0,ignoreCommands:!1}),a[r.PICK]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),a[r.SHADOW]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!1}),a[r.PRELOAD]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.PRELOAD_FLIGHT]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.MOST_DETAILED_PRELOAD]=Object.freeze({traversal:i["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.MOST_DETAILED_PICK]=Object.freeze({traversal:i["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),r.getPassOptions=function(t){return a[t]},e["a"]=Object.freeze(r)},f8cd:function(t,e,n){"use strict";var i=n("4f04");function o(){this.featurePropertiesDirty=!1}Object.defineProperties(o.prototype,{featuresLength:{get:function(){i["a"].throwInstantiationError()}},pointsLength:{get:function(){i["a"].throwInstantiationError()}},trianglesLength:{get:function(){i["a"].throwInstantiationError()}},geometryByteLength:{get:function(){i["a"].throwInstantiationError()}},texturesByteLength:{get:function(){i["a"].throwInstantiationError()}},batchTableByteLength:{get:function(){i["a"].throwInstantiationError()}},innerContents:{get:function(){i["a"].throwInstantiationError()}},readyPromise:{get:function(){i["a"].throwInstantiationError()}},tileset:{get:function(){i["a"].throwInstantiationError()}},tile:{get:function(){i["a"].throwInstantiationError()}},url:{get:function(){i["a"].throwInstantiationError()}},batchTable:{get:function(){i["a"].throwInstantiationError()}},metadata:{get:function(){i["a"].throwInstantiationError()},set:function(t){i["a"].throwInstantiationError()}},group:{get:function(){i["a"].throwInstantiationError()},set:function(t){i["a"].throwInstantiationError()}}}),o.prototype.hasProperty=function(t,e){i["a"].throwInstantiationError()},o.prototype.getFeature=function(t){i["a"].throwInstantiationError()},o.prototype.applyDebugSettings=function(t,e){i["a"].throwInstantiationError()},o.prototype.applyStyle=function(t){i["a"].throwInstantiationError()},o.prototype.update=function(t,e){i["a"].throwInstantiationError()},o.prototype.isDestroyed=function(){i["a"].throwInstantiationError()},o.prototype.destroy=function(){i["a"].throwInstantiationError()},e["a"]=o}}]);