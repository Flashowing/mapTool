(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~3a5a00ac"],{"1b48":function(e,t,i){"use strict";var n=i("2f63");function s(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function a(e,t,i,s){const r=t.innerContents,o=t.pointsLength,c=t.trianglesLength,l=t.featuresLength,u=t.geometryByteLength,h=t.texturesByteLength,m=t.batchTableByteLength;if(s?(e.numberOfFeaturesLoaded+=i?-l:l,e.numberOfPointsLoaded+=i?-o:o,e.geometryByteLength+=i?-u:u,e.texturesByteLength+=i?-h:h,e.batchTableByteLength+=i?-m:m):(e.numberOfFeaturesSelected+=i?-l:l,e.numberOfPointsSelected+=i?-o:o,e.numberOfTrianglesSelected+=i?-c:c),Object(n["a"])(r)){const t=r.length;for(let n=0;n<t;++n)a(e,r[n],i,s)}}s.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},s.prototype.incrementSelectionCounts=function(e){a(this,e,!1,!1)},s.prototype.incrementLoadCounts=function(e){a(this,e,!1,!0)},s.prototype.decrementLoadCounts=function(e){a(this,e,!0,!0)},s.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength},t["a"]=s},"49c4":function(e,t,i){"use strict";var n=i("dd06"),s=i("670c"),a=i("be18"),r=i("bef8"),o=i("dc1c"),c=i("8dfe"),l=i("535a"),u=i("9c35"),h=i("2f63"),m=i("45c5"),d=i("7d62"),g=i("c52f"),_=i("21d7"),f=i("f50f"),p=i("8bd8"),b=i("5ed2"),y=i("7524"),O=i("93da"),S=i("52f0"),L=i("d4ed"),v=i("283e"),x=i("f806"),T=i("f845"),M=i("d289"),E=i("6dc0"),C=i("b08e"),P=i("c0a9"),D=i("656b"),w=i("7abe"),j=i("d005"),A=i("9f0f"),F=i("d150"),k=i("c4a1"),I=i("71f7"),U=i("fede"),B=i("1b48"),R=i("9e51"),N=i("43ee"),V=i("55d8"),W=i("edfc"),q=i("1f48"),H=i("04e1"),X=i("2ab8"),z=i("7b4a"),G=i("17a9"),J=i("a307"),Z=i("c86b"),Y=i("3de6"),K=i("3626"),Q=i("1ec0"),$=i("eb1f"),ee=i("8cfb");function te(e){e=Object(l["a"])(e,l["a"].EMPTY_OBJECT),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._gltfUpAxis=void 0,this._cache=new I["a"],this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=Object(l["a"])(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=Object(l["a"])(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new y["a"],this._maximumScreenSpaceError=Object(l["a"])(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=Object(l["a"])(e.maximumMemoryUsage,512),this._styleEngine=new R["a"],this._modelMatrix=Object(h["a"])(e.modelMatrix)?S["a"].clone(e.modelMatrix):S["a"].clone(S["a"].IDENTITY),this._statistics=new B["a"],this._statisticsLast=new B["a"],this._statisticsPerPass=new Array(F["a"].NUMBER_OF_PASSES);for(let n=0;n<F["a"].NUMBER_OF_PASSES;++n)this._statisticsPerPass[n]=new B["a"];this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new U["a"](e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=Object(l["a"])(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=Object(l["a"])(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=O["a"].clamp(Object(l["a"])(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=Object(l["a"])(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._readyPromise=Object(u["a"])(),this._classificationType=e.classificationType,this._ellipsoid=Object(l["a"])(e.ellipsoid,g["a"].WGS84),this._initialClippingPlanesOriginMatrix=S["a"].IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=Object(l["a"])(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=Object(l["a"])(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=Object(l["a"])(e.preloadWhenHidden,!1),this.preloadFlightDestinations=Object(l["a"])(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=Object(l["a"])(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=Object(l["a"])(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=Object(l["a"])(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=Object(l["a"])(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=Object(l["a"])(e.foveatedInterpolationCallback,O["a"].lerp),this.foveatedTimeDelay=Object(l["a"])(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=Object(l["a"])(e.shadows,Z["a"].ENABLED),this.show=Object(l["a"])(e.show,!0),this.colorBlendMode=D["a"].HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new z["a"](e.pointCloudShading),this._pointCloudEyeDomeLighting=new X["a"],this.loadProgress=new _["a"],this.allTilesLoaded=new _["a"],this.initialTilesLoaded=new _["a"],this.tileLoad=new _["a"],this.tileUnload=new _["a"],this.tileFailed=new _["a"],this.tileVisible=new _["a"],this.skipLevelOfDetail=Object(l["a"])(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=Object(l["a"])(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=Object(l["a"])(e.skipScreenSpaceErrorFactor,16),this.skipLevels=Object(l["a"])(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=Object(l["a"])(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=Object(l["a"])(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes;const t=Object(h["a"])(e.imageBasedLightingFactor)||Object(h["a"])(e.luminanceAtZenith)||Object(h["a"])(e.sphericalHarmonicCoefficients)||Object(h["a"])(e.specularEnvironmentMaps);Object(h["a"])(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):t?(Object(m["a"])("ImageBasedLightingConstructor","Individual image-based lighting parameters were deprecated in Cesium 1.92. They will be removed in version 1.94. Use options.imageBasedLighting instead."),this._imageBasedLighting=new p["a"]({imageBasedLightingFactor:e.imageBasedLightingFactor,luminanceAtZenith:e.luminanceAtZenith,sphericalHarmonicCoefficients:e.sphericalHarmonicCoefficients,specularEnvironmentMaps:e.specularEnvironmentMaps}),this._shouldDestroyImageBasedLighting=!0):(this._imageBasedLighting=new p["a"],this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=Object(l["a"])(e.backFaceCulling,!0),this.showOutline=Object(l["a"])(e.showOutline,!0),this.splitDirection=Object(l["a"])(e.splitDirection,Y["a"].NONE),this.debugFreezeFrame=Object(l["a"])(e.debugFreezeFrame,!1),this.debugColorizeTiles=Object(l["a"])(e.debugColorizeTiles,!1),this.debugWireframe=Object(l["a"])(e.debugWireframe,!1),this.debugShowBoundingVolume=Object(l["a"])(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=Object(l["a"])(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=Object(l["a"])(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=Object(l["a"])(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=Object(l["a"])(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=Object(l["a"])(e.debugShowMemoryUsage,!1),this.debugShowUrl=Object(l["a"])(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader,this.enableModelExperimental=Object(l["a"])(e.enableModelExperimental,f["a"].enableModelExperimental);let i=Object(l["a"])(e.featureIdLabel,"featureId_0");"number"===typeof i&&(i="featureId_"+i),this._featureIdLabel=i;let s=Object(l["a"])(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof s&&(s="instanceFeatureId_"+s),this._instanceFeatureIdLabel=s,this._schemaLoader=void 0;const a=this;let r;Promise.resolve(e.url).then((function(e){let t;return r=L["a"].createIfNeeded(e),a._resource=r,a._credits=r.credits,"json"===r.extension?t=r.getBaseUri(!0):r.isDataUri&&(t=""),a._url=r.url,a._basePath=t,te.loadJson(r)})).then((function(e){return ne(a,e)})).then((function(e){a._root=a.loadTileset(r,e);const t=Object(h["a"])(e.asset.gltfUpAxis)?C["a"].fromName(e.asset.gltfUpAxis):C["a"].Y,i=e.asset;a._asset=i,a._properties=e.properties,a._geometricError=e.geometricError,a._extensionsUsed=e.extensionsUsed,a._extensions=e.extensions,a._gltfUpAxis=t,a._extras=e.extras;const s=i.extras;if(Object(h["a"])(s)&&Object(h["a"])(s.cesium)&&Object(h["a"])(s.cesium.credits)){const e=s.cesium.credits;let t=a._credits;Object(h["a"])(t)||(t=[],a._credits=t);for(let i=0;i<e.length;++i){const n=e[i];t.push(new c["a"](n.html,a._showCreditsOnScreen))}}const o=a._root.createBoundingVolume(e.root.boundingVolume,S["a"].IDENTITY),l=o.boundingSphere.center,u=a._ellipsoid.cartesianToCartographic(l);Object(h["a"])(u)&&u.height>n["a"]._defaultMinTerrainHeight&&(a._initialClippingPlanesOriginMatrix=x["a"].eastNorthUpToFixedFrame(l)),a._clippingPlanesOriginMatrix=S["a"].clone(a._initialClippingPlanesOriginMatrix),a._readyPromise.resolve(a)})).catch((function(e){a._readyPromise.reject(e)}))}function ie(e,t,i,n){const s=Object(h["a"])(i.implicitTiling)||Object(V["a"])(i,"3DTILES_implicit_tiling");if(s){const s=e.schema,a=new W["a"](t,i,s),r=new q["a"]({subdivisionScheme:a.subdivisionScheme,subtreeLevels:a.subtreeLevels,level:0,x:0,y:0,z:0}),c=a.subtreeUriTemplate.getDerivedResource({templateValues:r.getTemplateValues()}).url,l=!0,u=Object(o["a"])(i,l);u.contents=[{uri:c}],delete u.content,delete u.extensions;const h=new P["a"](e,t,u,n);return h.implicitTileset=a,h.implicitCoordinates=r,h}return new P["a"](e,t,i,n)}function ne(e,t){const i=Object(V["a"])(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let n;if(Object(h["a"])(i.schemaUri)){const t=e._resource.getDerivedResource({url:i.schemaUri});n=G["a"].loadSchema({resource:t})}else{if(!Object(h["a"])(i.schema))return Promise.resolve(t);n=G["a"].loadSchema({schema:i.schema})}return e._schemaLoader=n,n.promise.then((function(n){return e._metadataExtension=new j["a"]({schema:n.schema,metadataJson:i}),t}))}Object.defineProperties(te.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){N["a"].setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){return this._properties}},ready:{get:function(){return Object(h["a"])(this._root)}},readyPromise:{get:function(){return this._readyPromise.promise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return Object(m["a"])("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(Object(h["a"])(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(Object(h["a"])(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=S["a"].clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return Object(h["a"])(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(S["a"].multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):S["a"].IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},imageBasedLightingFactor:{get:function(){return this._imageBasedLighting.imageBasedLightingFactor},set:function(e){this._imageBasedLighting.imageBasedLightingFactor=e}},luminanceAtZenith:{get:function(){return this._imageBasedLighting.luminanceAtZenith},set:function(e){this._imageBasedLighting.luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._imageBasedLighting.sphericalHarmonicCoefficients},set:function(e){this._imageBasedLighting.sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._imageBasedLighting.specularEnvironmentMaps},set:function(e){this._imageBasedLighting.specularEnvironmentMaps=e}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"===typeof e&&(e="featureId_"+e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"===typeof e&&(e="instanceFeatureId_"+e),this._instanceFeatureIdLabel=e}}}),te.loadJson=function(e){const t=L["a"].createIfNeeded(e);return t.fetchJson()},te.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},te.prototype.loadTileset=function(e,t,i){const n=t.asset;if(!Object(h["a"])(n))throw new v["a"]("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version&&"1.1"!==n.version)throw new v["a"]("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");Object(h["a"])(t.extensionsRequired)&&te.checkSupportedExtensions(t.extensionsRequired);const s=this._statistics,a=n.tilesetVersion;Object(h["a"])(a)&&(this._basePath+="?v="+a,e=e.clone(),e.setQueryParameters({v:a}));const r=ie(this,e,t.root,i);Object(h["a"])(i)&&(i.children.push(r),r._depth=i._depth+1);const o=[];o.push(r);while(o.length>0){const t=o.pop();++s.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===k["a"].ADD;const i=t._header.children;if(Object(h["a"])(i)){const n=i.length;for(let s=0;s<n;++s){const n=i[s],a=ie(this,e,n,t);t.children.push(a),a._depth=t._depth+1,o.push(a)}}this._cullWithChildrenBounds&&A["a"].checkChildrenWithinParent(t)}return r};const se=new a["a"],ae=new r["a"],re=new S["a"],oe=new a["a"],ce=new a["a"],le=new a["a"];function ue(e,t){let i,n,s,o,c;const l=t.camera,u=e._root,h=u.contentBoundingVolume;if(h instanceof Q["a"])i=a["a"].normalize(l.positionWC,se),n=l.directionWC,s=l.positionCartographic.height,o=h.minimumHeight,c=h.maximumHeight;else{const e=S["a"].inverseTransformation(u.computedTransform,re),m=t.mapProjection.ellipsoid,d=h.boundingVolume,g=S["a"].multiplyByPoint(e,d.center,oe);if(a["a"].magnitude(g)>m.minimumRadius){const e=r["a"].fromCartesian(g,m,ae);i=a["a"].normalize(l.positionWC,se),n=l.directionWC,s=l.positionCartographic.height,o=0,c=2*e.height}else{const t=S["a"].multiplyByPoint(e,l.positionWC,ce);if(i=a["a"].UNIT_Z,n=S["a"].multiplyByPointAsVector(e,l.directionWC,le),n=a["a"].normalize(n,n),s=t.z,h instanceof ee["a"]){const e=u._header.boundingVolume.box[11];o=g.z-e,c=g.z+e}else if(h instanceof $["a"]){const e=d.radius;o=g.z-e,c=g.z+e}}}const m=e.dynamicScreenSpaceErrorHeightFalloff,d=o+(c-o)*m,g=c,_=O["a"].clamp((s-d)/(g-d),0,1),f=Math.abs(a["a"].dot(n,i));let p=1-f;p*=1-_;let b=e.dynamicScreenSpaceErrorDensity;b*=p,e._dynamicScreenSpaceErrorComputedDensity=b}function he(e,t){if(t.hasEmptyContent)return;const i=e._statistics,n=t.contentExpired,s=t.requestContent();s>0?i.numberOfAttemptedRequests+=s:(n&&(t.hasTilesetContent||t.hasImplicitContent?Ce(e,t):(i.decrementLoadCounts(t.content),--i.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(_e(e,t)),t.contentReadyPromise.then(pe(e,t)).catch(fe(e,t)))}function me(e,t){return e._priority-t._priority}function de(e,t){const i=e._requestedTilesInFlight;let n=0;const s=i.length;for(let a=0;a<s;++a){const e=i[a],s=t.frameNumber-e._touchedFrame>=1;e._contentState===w["a"].LOADING?s?(e.cancelRequests(),++n):n>0&&(i[a-n]=e):++n}i.length-=n}function ge(e,t){const i=e._requestedTiles,n=i.length;i.sort(me);for(let s=0;s<n;++s)he(e,i[s])}function _e(e,t){return function(){e._processingQueue.push(t),++e._statistics.numberOfTilesProcessing}}function fe(e,t){return function(i){const n=t._contentResource.url,s=Object(h["a"])(i.message)?i.message:i.toString();e.tileFailed.numberOfListeners>0?e.tileFailed.raiseEvent({url:n,message:s}):(console.log("A 3D tile failed to load: "+n),console.log("Error: "+s))}}function pe(e,t){return function(){--e._statistics.numberOfTilesProcessing,t.hasTilesetContent||t.hasImplicitContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t)}}function be(e){const t=e._processingQueue,i=t.length;let n=0;for(let s=0;s<i;++s){const e=t[s];e._contentState===w["a"].PROCESSING?n>0&&(t[s-n]=e):++n}t.length-=n}function ye(e,t){be(e);const i=e._processingQueue,n=i.length;for(let s=0;s<n;++s)i[s].process(e,t)}te.prototype.postPassesUpdate=function(e){this.ready&&(de(this,e),we(this,e),this._cache.unloadTiles(this,Pe),this._styleEngine.resetDirty())},te.prototype.prePassesUpdate=function(e){if(!this.ready)return;ye(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,Object(h["a"])(t)&&t.enabled&&t.update(e),Object(h["a"])(this._loadTimestamp)||(this._loadTimestamp=b["a"].clone(e.time)),this._timeSinceLoad=Math.max(1e3*b["a"].secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!Object(h["a"])(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&ue(this,e),e.newFrame&&this._cache.reset()};const Oe=new a["a"],Se={maximumFractionDigits:3};function Le(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,Se):Math.round(t).toLocaleString()}function ve(e){const t=e.boundingVolume.boundingVolume,i=t.halfAxes,n=t.radius;let s=a["a"].clone(t.center,Oe);if(Object(h["a"])(i))s.x+=.75*(i[0]+i[3]+i[6]),s.y+=.75*(i[1]+i[4]+i[7]),s.z+=.75*(i[2]+i[5]+i[8]);else if(Object(h["a"])(n)){let e=a["a"].normalize(t.center,Oe);e=a["a"].multiplyByScalar(e,.75*n,Oe),s=a["a"].add(e,t.center,Oe)}return s}function xe(e,t,i){let n="",s=0;if(t.debugShowGeometricError&&(n+="\nGeometric error: "+e.geometricError,s++),t.debugShowRenderingStatistics){n+="\nCommands: "+e.commandsLength,s++;const t=e.content.pointsLength;t>0&&(n+="\nPoints: "+e.content.pointsLength,s++);const i=e.content.trianglesLength;i>0&&(n+="\nTriangles: "+e.content.trianglesLength,s++),n+="\nFeatures: "+e.content.featuresLength,s++}if(t.debugShowMemoryUsage&&(n+="\nTexture Memory: "+Le(e.content.texturesByteLength),n+="\nGeometry Memory: "+Le(e.content.geometryByteLength),s+=2),t.debugShowUrl)if(e.hasMultipleContents){n+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)n+="\n- "+t[e];s+=t.length}else n+="\nUrl: "+e._header.content.uri,s++;const a={text:n.substring(1),position:i,font:19-s+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(a)}function Te(e,t){let i,n;const a=e._selectedTiles,r=a.length,o=e._emptyTiles,c=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(Object(h["a"])(e.debugPickedTile)){const t=Object(h["a"])(e.debugPickPosition)?e.debugPickPosition:ve(e.debugPickedTile),i=xe(e.debugPickedTile,e,t);i.pixelOffset=new s["a"](15,-15)}}else{for(i=0;i<r;++i)n=a[i],xe(n,e,ve(n));for(i=0;i<c;++i)n=o[i],(n.hasTilesetContent||n.hasImplicitContent)&&xe(n,e,ve(n))}e._tileDebugLabels.update(t)}function Me(e,t,i){e._styleEngine.applyStyle(e);const n=i.isRender,s=e._statistics,a=t.commandList,r=a.length,o=e._selectedTiles,c=o.length,l=e._emptyTiles,u=l.length,m=e.tileVisible;let d,g;const _=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&c>0;e._backfaceCommands.length=0,_&&(Object(h["a"])(e._stencilClearCommand)||(e._stencilClearCommand=new T["a"]({stencil:0,pass:M["a"].CESIUM_3D_TILE,renderState:E["a"].fromCache({stencilMask:K["a"].SKIP_LOD_MASK})})),a.push(e._stencilClearCommand));const f=a.length;for(d=0;d<c;++d)g=o[d],n&&m.raiseEvent(g),g.update(e,t,i),s.incrementSelectionCounts(g.content),++s.selected;for(d=0;d<u;++d)g=l[d],g.update(e,t,i);let p=a.length-f;if(e._backfaceCommands.trim(),_){const t=e._backfaceCommands.values,i=t.length;for(a.length+=i,d=p-1;d>=0;--d)a[f+i+d]=a[f+d];for(d=0;d<i;++d)a[f+d]=t[d]}p=a.length-r,s.numberOfCommands=p,n&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&p>0&&e._pointCloudEyeDomeLighting.update(t,r,e.pointCloudShading,e.boundingSphere),n&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(Object(h["a"])(e._tileDebugLabels)||(e._tileDebugLabels=new H["a"]),Te(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}const Ee=[];function Ce(e,t){const i=t,n=Ee;n.push(t);while(n.length>0){t=n.pop();const s=t.children,a=s.length;for(let e=0;e<a;++e)n.push(s[e]);t!==i&&(De(e,t),--e._statistics.numberOfTilesTotal)}i.children=[]}function Pe(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function De(e,t){e._cache.unloadTile(e,t,Pe),t.destroy()}function we(e,t){const i=e._statistics,n=e._statisticsLast,s=i.numberOfPendingRequests,a=i.numberOfTilesProcessing,r=n.numberOfPendingRequests,o=n.numberOfTilesProcessing;B["a"].clone(i,n);const c=s!==r||a!==o;c&&t.afterRender.push((function(){e.loadProgress.raiseEvent(s,a)})),e._tilesLoaded=0===i.numberOfPendingRequests&&0===i.numberOfTilesProcessing&&0===i.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}function je(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function Ae(e,t){t.frameNumber===e._updatedModelMatrixFrame&&Object(h["a"])(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!S["a"].equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=S["a"].clone(e.modelMatrix,e._previousModelMatrix)))}function Fe(e,t,i,n){if(t.mode===J["a"].MORPHING)return!1;if(!e.ready)return!1;const s=e._statistics;s.clear();const a=n.isRender;++e._updatedVisibilityFrame,je(e),Ae(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const r=n.traversal.selectTiles(e,t);if(n.requestTiles&&ge(e),Me(e,t,n),B["a"].clone(s,i),a){const i=e._credits;if(Object(h["a"])(i)&&0!==s.selected){const n=i.length;for(let s=0;s<n;++s){const n=i[s];n.showOnScreen=e._showCreditsOnScreen,t.creditDisplay.addCredit(n)}}}return r}te.prototype.trimLoadedTiles=function(){this._cache.trim()},te.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},te.prototype.updateForPass=function(e,t){const i=t.pass;if(i===F["a"].PRELOAD&&(!this.preloadWhenHidden||this.show)||i===F["a"].PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||i===F["a"].REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const n=e.commandList,s=e.camera,a=e.cullingVolume;t.ready=!1;const r=F["a"].getPassOptions(i),o=r.ignoreCommands,c=Object(l["a"])(t.commandList,n),u=c.length;e.commandList=c,e.camera=Object(l["a"])(t.camera,s),e.cullingVolume=Object(l["a"])(t.cullingVolume,a);const h=this._statisticsPerPass[i];(this.show||o)&&(this._pass=i,t.ready=Fe(this,e,h,r)),o&&(c.length=u),e.commandList=n,e.camera=s,e.cullingVolume=a},te.prototype.hasExtension=function(e){return!!Object(h["a"])(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},te.prototype.isDestroyed=function(){return!1},te.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(h["a"])(this._schemaLoader)&&G["a"].unload(this._schemaLoader),Object(h["a"])(this._root)){const e=Ee;e.push(this._root);while(e.length>0){const t=e.pop();t.destroy();const i=t.children,n=i.length;for(let s=0;s<n;++s)e.push(i[s])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(d["a"])(this)},te.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0},te.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!te.supportedExtensions[e[t]])throw new v["a"]("Unsupported 3D Tiles Extension: "+e[t])},t["a"]=te},"71f7":function(e,t,i){"use strict";var n=i("2f63"),s=i("8f14");function a(){this._list=new s["a"],this._sentinel=this._list.add(),this._trimTiles=!1}a.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},a.prototype.touch=function(e){const t=e.cacheNode;Object(n["a"])(t)&&this._list.splice(this._sentinel,t)},a.prototype.add=function(e){Object(n["a"])(e.cacheNode)||(e.cacheNode=this._list.add(e))},a.prototype.unloadTile=function(e,t,i){const s=t.cacheNode;Object(n["a"])(s)&&(this._list.remove(s),t.cacheNode=void 0,i(e,t))},a.prototype.unloadTiles=function(e,t){const i=this._trimTiles;this._trimTiles=!1;const n=this._list,s=1024*e.maximumMemoryUsage*1024,a=this._sentinel;let r=n.head;while(r!==a&&(e.totalMemoryUsageInBytes>s||i)){const i=r.item;r=r.next,this.unloadTile(e,i,t)}},a.prototype.trim=function(){this._trimTiles=!0},t["a"]=a},"859c":function(e,t,i){"use strict";var n=i("2f63"),s=i("66bf"),a=i("7524"),r=i("6380"),o=i("c4a1");function c(){}function l(e){return e._visible&&e._inRequestVolume}const u={stack:new a["a"],stackMaximumLength:0},h={stack:new a["a"],stackMaximumLength:0},m={stack:new a["a"],stackMaximumLength:0},d={stack:new a["a"],stackMaximumLength:0,ancestorStack:new a["a"],ancestorStackMaximumLength:0},g=2;function _(e,t,i){const n=e._maximumScreenSpaceError,s=e._maximumScreenSpaceError;V(e,t,n,s,i)}function f(e,t,i){const n=Number.MAX_VALUE,s=e._maximumScreenSpaceError;V(e,t,n,s,i),q(e,t,i)}function p(e,t,i){const n=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),s=e.maximumScreenSpaceError;V(e,t,n,s,i),q(e,t,i)}function b(e){return e._skipLevelOfDetail}function y(e,t){e._emptyTiles.push(t)}function O(e,t,i){if(t.contentVisibility(i)!==s["a"].OUTSIDE){const n=t.content;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<i.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=i.frameNumber,e._selectedTiles.push(t)}}function S(e,t,i){const n=m.stack;n.push(t);while(n.length>0){m.stackMaximumLength=Math.max(m.stackMaximumLength,n.length);const s=n.pop(),a=s.children,r=a.length;for(let o=0;o<r;++o){const s=a[o];l(s)&&(s.contentAvailable?(j(e,s,i),x(e,s,i),O(e,s,i)):s._depth-t._depth<g&&n.push(s))}}}function L(e,t,i){if(!b(e))return void(t.contentAvailable&&O(e,t,i));const s=t.contentAvailable?t:t._ancestorWithContentAvailable;Object(n["a"])(s)?s._shouldSelect=!0:S(e,t,i)}function v(e,t,i){++e._statistics.visited,t._visitedFrame=i.frameNumber}function x(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function T(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}function M(e,t,i){if(!e._cullRequestsWhileMoving)return!0;const n=t.boundingSphere,s=Math.max(2*n.radius,1),a=i.camera,r=0!==a.positionWCDeltaMagnitude?a.positionWCDeltaMagnitude:a.positionWCDeltaMagnitudeLastFrame,o=e.cullRequestsWhileMovingMultiplier*r/s;return o<1}function E(e,t,i){if(t._requestedFrame===i.frameNumber||!k(t)&&!t.contentExpired)return;if(!M(e,t,i))return;const n=i.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&n||(t._requestedFrame=i.frameNumber,e._requestedTiles.push(t))}function C(e,t,i){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(i),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function P(e,t,i){let n=!1;const s=t.children,a=s.length;for(let r=0;r<a;++r){const t=s[r];C(e,t,i),n=n||l(t)}return n}function D(e,t,i){const s=t.parent;return!(!Object(n["a"])(s)||s.hasTilesetContent||s.hasImplicitContent||s.refine!==o["a"].ADD)&&t.getScreenSpaceError(i,!0)<=e._maximumScreenSpaceError}function w(e,t,i){if(C(e,t,i),!l(t))return;const n=t.children.length>0;if((t.hasTilesetContent||t.hasImplicitContent)&&n){const n=t.children[0];return w(e,n,i),void(t._visible=n._visible)}if(D(e,t,i))return void(t._visible=!1);const s=t.refine===o["a"].REPLACE,a=t._optimChildrenWithinParent===r["a"].USE_OPTIMIZATION;return s&&a&&n&&!P(e,t,i)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}function j(e,t,i){w(e,t,i),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,T(e,t),t._shouldSelect=!1,t._finalResolution=!0}function A(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const i=e.parent;if(Object(n["a"])(i)){const n=!k(i)||i._requestedFrame===t.frameNumber;e._ancestorWithContent=n?i:i._ancestorWithContent,e._ancestorWithContentAvailable=i.contentAvailable?i:i._ancestorWithContentAvailable}}function F(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function k(e){return!F(e)&&e.contentUnloaded}function I(e,t){const i=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||Object(n["a"])(i)&&t._screenSpaceError<i._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>i._depth+e.skipLevels)}function U(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function B(e,t,i,n){let s;const a=t.refine===o["a"].REPLACE,r=t.children,c=r.length;for(s=0;s<c;++s)j(e,r[s],n);r.sort(U);const u=!b(e)&&a&&!F(t);let h,m=!0,d=!1,g=-1,_=Number.MAX_VALUE;for(s=0;s<c;++s)if(h=r[s],l(h)?(i.push(h),h._foveatedFactor<_&&(g=s,_=h._foveatedFactor),d=!0):(u||e.loadSiblings)&&(h._foveatedFactor<_&&(g=s,_=h._foveatedFactor),E(e,h,n),x(e,h,n)),u){let t;t=!!h._inRequestVolume&&(F(h)?W(e,h,n):h.contentAvailable),m=m&&t}if(d||(m=!1),-1!==g&&!b(e)&&a){const i=r[g];i._wasMinPriorityChild=!0;const n=(t._wasMinPriorityChild||t===e.root)&&_<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(n._foveatedFactor=Math.min(i._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(i._distanceToCamera,n._distanceToCamera),s=0;s<c;++s)h=r[s],h._priorityHolder=n}return m}function R(e,t,i){return!b(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!Object(n["a"])(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>i:t._screenSpaceError>i))}function N(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function V(e,t,i,s,a){const r=u.stack;r.push(t);while(r.length>0){u.stackMaximumLength=Math.max(u.stackMaximumLength,r.length);const t=r.pop();A(t,a);const s=R(e,t,i),c=t.refine===o["a"].ADD,l=t.refine===o["a"].REPLACE,h=t.parent,m=!Object(n["a"])(h)||h._refines;let d=!1;N(e,t)&&(d=B(e,t,r,a)&&m);const g=!d&&m;F(t)?(y(e,t,a),E(e,t,a),g&&L(e,t,a)):c?(L(e,t,a),E(e,t,a)):l&&(s?(E(e,t,a),g&&L(e,t,a)):g?(L(e,t,a),E(e,t,a)):I(e,t)&&E(e,t,a)),v(e,t,a),x(e,t,a),t._refines=d}}function W(e,t,i){let n=!0;const s=h.stack;s.push(t);while(s.length>0){h.stackMaximumLength=Math.max(h.stackMaximumLength,s.length);const t=s.pop(),a=t.children,r=a.length,o=F(t),c=o&&N(e,t),u=o&&0===t.children.length;if(c||t.contentAvailable||u||(n=!1),j(e,t,i),l(t)||(E(e,t,i),x(e,t,i)),c)for(let e=0;e<r;++e){const t=a[e];s.push(t)}}return n}function q(e,t,i){const s=d.stack,a=d.ancestorStack;let r;s.push(t);while(s.length>0||a.length>0){if(d.stackMaximumLength=Math.max(d.stackMaximumLength,s.length),d.ancestorStackMaximumLength=Math.max(d.ancestorStackMaximumLength,a.length),a.length>0){const t=a.peek();if(t._stackLength===s.length){a.pop(),t!==r&&(t._finalResolution=!1),O(e,t,i);continue}}const t=s.pop();if(!Object(n["a"])(t))continue;const c=t.refine===o["a"].ADD,u=t._shouldSelect,h=t.children,m=h.length,g=N(e,t);if(u)if(c)O(e,t,i);else{if(t._selectionDepth=a.length,t._selectionDepth>0&&(e._hasMixedContent=!0),r=t,!g){O(e,t,i);continue}a.push(t),t._stackLength=s.length}if(g)for(let e=0;e<m;++e){const t=h[e];l(t)&&s.push(t)}}}c.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;const i=e.root;if(j(e,i,t),!l(i))return;if(i.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;b(e)?e.immediatelyLoadDesiredLevelOfDetail?f(e,i,t):p(e,i,t):_(e,i,t),u.stack.trim(u.stackMaximumLength),h.stack.trim(h.stackMaximumLength),m.stack.trim(m.stackMaximumLength),d.stack.trim(d.stackMaximumLength),d.ancestorStack.trim(d.ancestorStackMaximumLength);const n=e._requestedTiles,s=n.length;for(let a=0;a<s;++a)n[a].updatePriority()},t["a"]=c},8981:function(e,t,i){"use strict";var n=i("66bf"),s=i("7524"),a=i("c4a1");function r(){}const o={stack:new s["a"],stackMaximumLength:0};function c(e){return e._visible&&e._inRequestVolume}function l(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function u(e){return!l(e)&&e.contentUnloaded}function h(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:(t.hasEmptyContent,!0))}function m(e,t,i,n){const s=t.children,a=s.length;for(let r=0;r<a;++r){const e=s[r];e.updateVisibility(n),c(e)&&i.push(e)}}function d(e,t){(u(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function g(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function _(e){++e.statistics.visited}function f(e,t,i){t.contentAvailable&&t.contentVisibility(i)!==n["a"].OUTSIDE&&e._selectedTiles.push(t)}r.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;let i=!0;const n=e.root;if(n.updateVisibility(t),!c(n))return i;const s=o.stack;s.push(e.root);while(s.length>0){o.stackMaximumLength=Math.max(o.stackMaximumLength,s.length);const n=s.pop(),r=n.refine===a["a"].ADD,c=n.refine===a["a"].REPLACE,u=h(e,n);u&&m(e,n,s,t),(r||c&&!u)&&(d(e,n),g(e,n,t),f(e,n,t),l(n)||n.contentAvailable||(i=!1)),_(e)}return o.stack.trim(o.stackMaximumLength),i},t["a"]=r},d005:function(e,t,i){"use strict";var n=i("535a"),s=i("2f63"),a=i("6d42"),r=i("5d12");function o(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=e.metadataJson,i=e.schema,o=Object(n["a"])(t.metadata,t.tileset);let c;Object(s["a"])(o)&&(c=new r["a"]({tileset:o,class:i.classes[o.class]}));let l=[];const u=[],h=t.groups;if(Array.isArray(h)){const e=h.length;for(let t=0;t<e;t++){const e=h[t];u.push(new a["a"]({group:e,class:i.classes[e.class]}))}}else if(Object(s["a"])(h)){l=Object.keys(h).sort();const e=l.length;for(let t=0;t<e;t++){const e=l[t];if(h.hasOwnProperty(e)){const t=h[e];u.push(new a["a"]({id:e,group:h[e],class:i.classes[t.class]}))}}}this._schema=i,this._groups=u,this._groupIds=l,this._tileset=c,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(o.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),t["a"]=o},fede:function(e,t,i){"use strict";var n=i("bd8d"),s=i("2f63"),a=i("5ed2"),r=i("93da");function o(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function c(e,t){let i;return i="_loadTimestamp"===t?a["a"].toDate(e).getTime():e,i}function l(e,t){const i=e.tilePropertyName;if(Object(s["a"])(i)){const n=c(t[i],i);return Object(s["a"])(n)?(e._maximum=Math.max(n,e._maximum),e._minimum=Math.min(n,e._minimum),n):(e.tilePropertyName=void 0,n)}}o.prototype.setReferenceMinimumMaximum=function(e,t,i){this._referenceMinimum[i]=c(e,i),this._referenceMaximum[i]=c(t,i)};const u=[new n["a"](.1,.1,.1,1),new n["a"](.153,.278,.878,1),new n["a"](.827,.231,.49,1),new n["a"](.827,.188,.22,1),new n["a"](1,.592,.259,1),new n["a"](1,.843,0,1)];o.prototype.colorize=function(e,t){const i=this.tilePropertyName;if(!Object(s["a"])(i)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const a=l(this,e),o=this._previousMinimum,c=this._previousMaximum;if(o===Number.MAX_VALUE||c===-Number.MAX_VALUE)return;const h=c-o+r["a"].EPSILON7,m=r["a"].clamp(a-o,0,h),d=m/h,g=u.length-1,_=d*g,f=Math.floor(_),p=Math.ceil(_),b=_-f,y=u[f],O=u[p],S=n["a"].clone(n["a"].WHITE);S.red=r["a"].lerp(y.red,O.red,b),S.green=r["a"].lerp(y.green,O.green,b),S.blue=r["a"].lerp(y.blue,O.blue,b),e._debugColor=S},o.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if(Object(s["a"])(e)){const t=this._referenceMinimum[e],i=this._referenceMaximum[e],n=Object(s["a"])(t)&&Object(s["a"])(i);this._previousMinimum=n?t:this._minimum,this._previousMaximum=n?i:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}},t["a"]=o}}]);