(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~52808e3c"],{"0cab":function(t,e,n){"use strict";var i=n("670c"),a=n("43ee"),o=n("2bb9"),r=n("bd8d"),s=n("c7eb"),c=n("ef54");const u={name:"ModelClippingPlanesPipelineStage"},d=new i["a"];u.process=function(t,e,n){const i=e.clippingPlanes,u=n.context,l=t.shaderBuilder;l.addDefine("HAS_CLIPPING_PLANES",void 0,c["a"].FRAGMENT),l.addDefine("CLIPPING_PLANES_LENGTH",i.length,c["a"].FRAGMENT),i.unionClippingRegions&&l.addDefine("UNION_CLIPPING_REGIONS",void 0,c["a"].FRAGMENT),a["a"].useFloatTexture(u)&&l.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,c["a"].FRAGMENT);const h=a["a"].getTextureResolution(i,u,d);l.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",h.x,c["a"].FRAGMENT),l.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",h.y,c["a"].FRAGMENT),l.addUniform("sampler2D","model_clippingPlanes",c["a"].FRAGMENT),l.addUniform("vec4","model_clippingPlanesEdgeStyle",c["a"].FRAGMENT),l.addUniform("mat4","model_clippingPlanesMatrix",c["a"].FRAGMENT),l.addFragmentLines([s["a"]]);const f={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){const t=r["a"].clone(i.edgeColor);return t.alpha=i.edgeWidth,t},model_clippingPlanesMatrix:function(){return e._clippingPlanesMatrix}};t.uniformMap=Object(o["a"])(f,t.uniformMap)},e["a"]=u},"15f5":function(t,e,n){"use strict";var i=n("2f63"),a=n("ef54"),o=n("d283"),r=n("df9b");const s={name:"LightingPipelineStage",process:function(t,e){const n=t.model,s=t.lightingOptions,c=t.shaderBuilder;if(Object(i["a"])(n.lightColor)){c.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,a["a"].FRAGMENT),c.addUniform("vec3","model_lightColorHdr",a["a"].FRAGMENT);const e=t.uniformMap;e.model_lightColorHdr=function(){return n.lightColor}}const u=s.lightingModel;u===r["a"].PBR?c.addDefine("LIGHTING_PBR",void 0,a["a"].FRAGMENT):c.addDefine("LIGHTING_UNLIT",void 0,a["a"].FRAGMENT),c.addFragmentLines([o["a"]])}};e["a"]=s},1972:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("420f"),a=n("5af0"),o=n("bd8d"),r=n("2f63"),s=n("7d62"),c=n("6b2f"),u=n("535a"),d=n("9693"),l=n("d887");function h(t){const e=t.model,n=t.propertyTable;this._propertyTable=n,this._model=e,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=d["a"].ALL_OPAQUE,f(this)}function f(t){const e=t._model,n=l["a"].is3DTiles(e.type),o=t._propertyTable.count;if(0===o)return;let r;const s=new Array(o);if(n){const t=e.content;for(r=0;r<o;r++)s[r]=new a["a"](t,r)}else for(r=0;r<o;r++)s[r]=new c["a"]({model:e,featureId:r,featureTable:t});t._features=s,t._featuresLength=o,t._batchTexture=new i["a"]({featuresLength:o,owner:t,statistics:n?e.content.tileset.statistics:t._statistics})}Object.defineProperties(h.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}}),h.prototype.update=function(t){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,t);const e=d["a"].getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==e&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=e)},h.prototype.setShow=function(t,e){this._batchTexture.setShow(t,e)},h.prototype.setAllShow=function(t){this._batchTexture.setAllShow(t)},h.prototype.getShow=function(t){return this._batchTexture.getShow(t)},h.prototype.setColor=function(t,e){this._batchTexture.setColor(t,e)},h.prototype.setAllColor=function(t){this._batchTexture.setAllColor(t)},h.prototype.getColor=function(t,e){return this._batchTexture.getColor(t,e)},h.prototype.getPickColor=function(t){return this._batchTexture.getPickColor(t)},h.prototype.getFeature=function(t){return this._features[t]},h.prototype.hasProperty=function(t,e){return this._propertyTable.hasProperty(t,e)},h.prototype.hasPropertyBySemantic=function(t,e){return this._propertyTable.hasPropertyBySemantic(t,e)},h.prototype.getProperty=function(t,e){return this._propertyTable.getProperty(t,e)},h.prototype.getPropertyBySemantic=function(t,e){return this._propertyTable.getPropertyBySemantic(t,e)},h.prototype.getPropertyNames=function(t){return this._propertyTable.getPropertyIds(t)},h.prototype.setProperty=function(t,e,n){return this._propertyTable.setProperty(t,e,n)};const m=new o["a"];h.prototype.applyStyle=function(t){if(!Object(r["a"])(t))return this.setAllColor(i["a"].DEFAULT_COLOR_VALUE),void this.setAllShow(i["a"].DEFAULT_SHOW_VALUE);for(let e=0;e<this._featuresLength;e++){const n=this.getFeature(e),a=Object(r["a"])(t.color)?Object(u["a"])(t.color.evaluateColor(n,m),i["a"].DEFAULT_COLOR_VALUE):i["a"].DEFAULT_COLOR_VALUE,o=Object(r["a"])(t.show)?Object(u["a"])(t.show.evaluate(n),i["a"].DEFAULT_SHOW_VALUE):i["a"].DEFAULT_SHOW_VALUE;this.setColor(e,a),this.setShow(e,o)}},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(t){this._batchTexture.destroy(),Object(s["a"])(this)}},"244f":function(t,e,n){"use strict";var i=n("2f63"),a=n("535a"),o=n("ef54"),r=n("9fb6"),s=n("df9b"),c=n("a3a4"),u=n("d289"),d=n("df07"),l=n("be18"),h=n("a561"),f=n("8bde"),m=n("a141"),p=n("60e0");const _=f["a"].Material,g=f["a"].MetallicRoughness,T=f["a"].SpecularGlossiness,b={};function O(t,e,n,i,a){const r=`HAS_${a}_TEXTURE_TRANSFORM`;t.addDefine(r,void 0,o["a"].FRAGMENT);const s=i+"Transform";t.addUniform("mat3",s,o["a"].FRAGMENT),e[s]=function(){return n.transform}}function y(t,e,n,r,s,c){t.addUniform("sampler2D",r,o["a"].FRAGMENT),e[r]=function(){return Object(a["a"])(n.texture,c)};const u=`HAS_${s}_TEXTURE`;t.addDefine(u,void 0,o["a"].FRAGMENT);const l=n.texCoord,h="v_texCoord_"+l,f="TEXCOORD_"+s;t.addDefine(f,h,o["a"].FRAGMENT);const m=n.transform;Object(i["a"])(m)&&!d["a"].equals(m,d["a"].IDENTITY)&&O(t,e,n,r,s)}function I(t,e,n,a,r,s){const c=t.emissiveTexture;Object(i["a"])(c)&&y(n,e,c,"u_emissiveTexture","EMISSIVE",s);const u=t.emissiveFactor;Object(i["a"])(u)&&!l["a"].equals(u,_.DEFAULT_EMISSIVE_FACTOR)&&(n.addUniform("vec3","u_emissiveFactor",o["a"].FRAGMENT),e.u_emissiveFactor=function(){return t.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,o["a"].FRAGMENT));const d=t.normalTexture;Object(i["a"])(d)&&y(n,e,d,"u_normalTexture","NORMAL",r);const h=t.occlusionTexture;Object(i["a"])(h)&&y(n,e,h,"u_occlusionTexture","OCCLUSION",a)}function S(t,e,n,a){const r=t.specularGlossiness;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,o["a"].FRAGMENT);const s=r.diffuseTexture;Object(i["a"])(s)&&y(n,e,s,"u_diffuseTexture","DIFFUSE",a);const c=r.diffuseFactor;Object(i["a"])(c)&&!h["a"].equals(c,T.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",o["a"].FRAGMENT),e.u_diffuseFactor=function(){return r.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,o["a"].FRAGMENT));const u=r.specularGlossinessTexture;Object(i["a"])(u)&&y(n,e,u,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",a);const d=r.specularFactor;Object(i["a"])(d)&&!l["a"].equals(d,T.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_specularFactor",o["a"].FRAGMENT),e.u_specularFactor=function(){return r.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,o["a"].FRAGMENT));const f=r.glossinessFactor;Object(i["a"])(f)&&f!==T.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",o["a"].FRAGMENT),e.u_glossinessFactor=function(){return r.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,o["a"].FRAGMENT))}function A(t,e,n,a){const r=t.metallicRoughness;n.addDefine("USE_METALLIC_ROUGHNESS",void 0,o["a"].FRAGMENT);const s=r.baseColorTexture;Object(i["a"])(s)&&y(n,e,s,"u_baseColorTexture","BASE_COLOR",a);const c=r.baseColorFactor;Object(i["a"])(c)&&!h["a"].equals(c,g.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",o["a"].FRAGMENT),e.u_baseColorFactor=function(){return r.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,o["a"].FRAGMENT));const u=r.metallicRoughnessTexture;Object(i["a"])(u)&&y(n,e,u,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",a);const d=r.metallicFactor;Object(i["a"])(d)&&d!==g.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",o["a"].FRAGMENT),e.u_metallicFactor=function(){return r.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,o["a"].FRAGMENT));const l=r.roughnessFactor;Object(i["a"])(l)&&l!==g.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",o["a"].FRAGMENT),e.u_roughnessFactor=function(){return r.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,o["a"].FRAGMENT))}b.name="MaterialPipelineStage",b.process=function(t,e,n){const a=e.material,d=t.uniformMap,l=t.shaderBuilder,h=n.context.defaultTexture,f=n.context.defaultNormalTexture,_=n.context.defaultEmissiveTexture;I(a,d,l,h,f,_),Object(i["a"])(a.specularGlossiness)?S(a,d,l,h):A(a,d,l,h);const g=p["a"].getAttributeBySemantic(e,m["a"].NORMAL),T=t.lightingOptions;a.unlit||!g?T.lightingModel=s["a"].UNLIT:T.lightingModel=s["a"].PBR;const b=t.model,O=b.backFaceCulling&&!a.doubleSided,y=Object(i["a"])(b.color)&&b.color.alpha<1;t.renderStateOptions.cull={enabled:O&&!y};const E=t.alphaOptions;Object(i["a"])(E.alphaMode)||(E.alphaMode=a.alphaMode,a.alphaMode===r["a"].BLEND?E.pass=u["a"].TRANSLUCENT:a.alphaMode===r["a"].MASK&&(E.alphaCutoff=a.alphaCutoff)),l.addFragmentLines([c["a"]]),b.debugWireframe&&l.addDefine("USE_WIREFRAME",void 0,o["a"].FRAGMENT)},b._processTexture=y,b._processTextureTransform=O,e["a"]=b},"31ef":function(t,e,n){"use strict";var i=n("9fb6"),a=n("c1f7"),o=n("2bb9"),r=n("6fb2"),s=n("d289"),c=n("ef54");const u={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend",process:function(t,e,n){const d=t.shaderBuilder;d.addDefine("HAS_MODEL_COLOR",void 0,c["a"].FRAGMENT),d.addFragmentLines([r["a"]]);const l={},h=e.color,f=t.renderStateOptions;0===h.alpha?(f.colorMask={red:!1,green:!1,blue:!1,alpha:!1},f.depthMask=!1):h.alpha<1&&(t.alphaOptions.pass=s["a"].TRANSLUCENT,t.alphaOptions.alphaMode=i["a"].BLEND),d.addUniform("vec4",u.COLOR_UNIFORM_NAME,c["a"].FRAGMENT),l[u.COLOR_UNIFORM_NAME]=function(){return e.color},d.addUniform("float",u.COLOR_BLEND_UNIFORM_NAME,c["a"].FRAGMENT),l[u.COLOR_BLEND_UNIFORM_NAME]=function(){return a["a"].getColorBlend(e.colorBlendMode,e.colorBlendAmount)},t.uniformMap=Object(o["a"])(l,t.uniformMap)}};e["a"]=u},"3f56":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("b08e"),a=n("bd8d"),o=n("2bb9"),r=n("2f63"),s=n("7d62"),c=n("d289"),u=n("7c52");function d(t,e,n){this._tileset=t,this._tile=e,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0}function l(t,e,n,a){const r={cull:!1,releaseGltfJson:!0,opaquePass:c["a"].CESIUM_3D_TILE,modelMatrix:e.computedTransform,upAxis:t._gltfUpAxis,forwardAxis:i["a"].X,incrementallyLoadTextures:!1,customShader:t.customShader,content:n,show:t.show,colorBlendMode:t.colorBlendMode,colorBlendAmount:t.colorBlendAmount,lightColor:t.lightColor,imageBasedLighting:t.imageBasedLighting,featureIdLabel:t.featureIdLabel,instanceFeatureIdLabel:t.instanceFeatureIdLabel,pointCloudShading:t.pointCloudShading,clippingPlanes:t.clippingPlanes,backFaceCulling:t.backFaceCulling,shadows:t.shadows,showCreditsOnScreen:t.showCreditsOnScreen,splitDirection:t.splitDirection,debugWireframe:t.debugWireframe};return Object(o["a"])(a,r)}Object.defineProperties(d.prototype,{featuresLength:{get:function(){const t=this._model,e=t.featureTables,n=t.featureTableId;return Object(r["a"])(e)&&Object(r["a"])(e[n])?e[n].featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._model.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const t=this._model,e=t.featureTables,n=t.featureTableId;if(Object(r["a"])(e)&&Object(r["a"])(e[n]))return e[n]}},metadata:{get:function(){return this._metadata},set:function(t){this._metadata=t}},group:{get:function(){return this._group},set:function(t){this._group=t}}}),d.prototype.getFeature=function(t){const e=this._model,n=e.featureTableId;if(!Object(r["a"])(n))return;const i=e.featureTables[n];return i.getFeature(t)},d.prototype.hasProperty=function(t,e){const n=this._model,i=n.featureTableId;if(!Object(r["a"])(i))return!1;const a=n.featureTables[i];return a.hasProperty(t,e)},d.prototype.applyDebugSettings=function(t,e){e=t?e:a["a"].WHITE,0===this.featuresLength?this._model.color=e:Object(r["a"])(this.batchTable)&&this.batchTable.setAllColor(e)},d.prototype.applyStyle=function(t){this._model.style=t},d.prototype.update=function(t,e){const n=this._model,i=this._tile;n.colorBlendAmount=t.colorBlendAmount,n.colorBlendMode=t.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=t.customShader,n.pointCloudShading=t.pointCloudShading,n.featureIdLabel=t.featureIdLabel,n.instanceFeatureIdLabel=t.instanceFeatureIdLabel,n.lightColor=t.lightColor,n.imageBasedLighting=t.imageBasedLighting,n.backFaceCulling=t.backFaceCulling,n.shadows=t.shadows,n.showCreditsOnScreen=t.showCreditsOnScreen,n.splitDirection=t.splitDirection,n.debugWireframe=t.debugWireframe;const a=t.clippingPlanes;n.referenceMatrix=t.clippingPlanesOriginMatrix,Object(r["a"])(a)&&i.clippingPlanesDirty&&(n._clippingPlanes=a.enabled&&i._isClipped?a:void 0),Object(r["a"])(a)&&Object(r["a"])(n._clippingPlanes)&&n._clippingPlanes!==a&&(n._clippingPlanes=a),n.update(e)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),Object(s["a"])(this)},d.fromGltf=function(t,e,n,i){const a=new d(t,e,n),o={gltf:i,basePath:n},r=l(t,e,a,o);return a._model=u["a"].fromGltf(r),a},d.fromB3dm=function(t,e,n,i,a){const o=new d(t,e,n),r={arrayBuffer:i,byteOffset:a,resource:n},s=l(t,e,o,r);return o._model=u["a"].fromB3dm(s),o},d.fromI3dm=function(t,e,n,i,a){const o=new d(t,e,n),r={arrayBuffer:i,byteOffset:a,resource:n},s=l(t,e,o,r);return o._model=u["a"].fromI3dm(s),o},d.fromPnts=function(t,e,n,i,a){const o=new d(t,e,n),r={arrayBuffer:i,byteOffset:a,resource:n},s=l(t,e,o,r);return o._model=u["a"].fromPnts(s),o}},"45cb":function(t,e,n){"use strict";var i=n("535a"),a=n("2f63"),o=n("21d7"),r=n("5ed2"),s=n("8a9e"),c=n("9007"),u=n("f1ad");function d(t,e,n){this._animation=e,this._name=e.name,this._runtimeChannels=void 0,this._startTime=r["a"].clone(n.startTime),this._delay=Object(i["a"])(n.delay,0),this._stopTime=r["a"].clone(n.stopTime),this.removeOnStop=Object(i["a"])(n.removeOnStop,!1),this._multiplier=Object(i["a"])(n.multiplier,1),this._reverse=Object(i["a"])(n.reverse,!1),this._loop=Object(i["a"])(n.loop,s["a"].NONE),this.start=new o["a"],this.update=new o["a"],this.stop=new o["a"],this._state=c["a"].STOPPED,this._computedStartTime=void 0,this._duration=void 0;const a=this;this._raiseStartEvent=function(){a.start.raiseEvent(t,a)},this._updateEventTime=0,this._raiseUpdateEvent=function(){a.update.raiseEvent(t,a,a._updateEventTime)},this._raiseStopEvent=function(){a.stop.raiseEvent(t,a)},this._model=t,this._localStartTime=void 0,this._localStopTime=void 0,l(this)}function l(t){let e=Number.MAX_VALUE,n=-Number.MAX_VALUE;const i=t._model.sceneGraph,o=t._animation,r=o.channels,s=r.length,c=[];for(let d=0;d<s;d++){const o=r[d],s=o.target;if(!Object(a["a"])(s))continue;const l=s.node.index,h=i._runtimeNodes[l],f=new u["a"]({channel:o,runtimeAnimation:t,runtimeNode:h}),m=o.sampler.input;e=Math.min(e,m[0]),n=Math.max(n,m[m.length-1]),c.push(f)}t._runtimeChannels=c,t._localStartTime=e,t._localStopTime=n}Object.defineProperties(d.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}}}),d.prototype.animate=function(t){const e=this._runtimeChannels,n=e.length;for(let i=0;i<n;i++)e[i].animate(t)},e["a"]=d},"58ee":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("535a"),a=n("2f63"),o=n("1b8d"),r=n("6f64"),s=n("5ecf"),c=n("47f3"),u=n("366d"),d=n("d2b3"),l=n("195b"),h=n("2f21"),f=n("026e"),m=n("15f5"),p=n("244f"),_=n("c7f8"),g=n("60e0"),T=n("d6b4"),b=n("c8d19"),O=n("14d4"),y=n("f23e"),I=n("794a");function S(t){t=Object(i["a"])(t,i["a"].EMPTY_OBJECT);const e=t.primitive,n=t.node,a=t.model;this.primitive=e,this.node=n,this.model=a,this.pipelineStages=[],this.drawCommands=[],this.boundingSphere=void 0,this.updateStages=[],this.configurePipeline()}function A(t,e,n){let i;return Object(a["a"])(e.instances)&&(i=g["a"].getFeatureIdsByLabel(e.instances.featureIds,t.instanceFeatureIdLabel),Object(a["a"])(i))?{hasFeatureIds:!0,hasPropertyTable:Object(a["a"])(i.propertyTableId)}:(i=g["a"].getFeatureIdsByLabel(n.featureIds,t.featureIdLabel),Object(a["a"])(i)?{hasFeatureIds:!0,hasPropertyTable:Object(a["a"])(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}S.prototype.configurePipeline=function(){const t=this.pipelineStages;t.length=0;const e=this.primitive,n=this.node,i=this.model,S=i.customShader,E=Object(a["a"])(e.morphTargets)&&e.morphTargets.length>0,N=Object(a["a"])(n.skin),M=Object(a["a"])(S),C=M&&Object(a["a"])(S.fragmentShaderText),P=!C||S.mode!==c["a"].REPLACE_MATERIAL,L=g["a"].hasQuantizedAttributes(e.attributes),R=i.pointCloudShading,D=Object(a["a"])(R)&&R.attenuation,F=A(i,n,e);t.push(f["a"]),E&&t.push(T["a"]),N&&t.push(I["a"]),D&&e.primitiveType===o["a"].POINTS&&t.push(O["a"]),L&&t.push(h["a"]),P&&t.push(p["a"]),t.push(d["a"]),t.push(_["a"]),F.hasPropertyTable&&(t.push(y["a"]),t.push(s["a"]),t.push(l["a"])),M&&t.push(u["a"]),t.push(m["a"]),i.allowPicking&&t.push(b["a"]),t.push(r["a"])}},"5ad4":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("52f0"),a=n("535a");function o(t){t=Object(a["a"])(t,a["a"].EMPTY_OBJECT),this._sceneGraph=t.sceneGraph;const e=t.skin;this._skin=e,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],r(this)}function r(t){const e=t.skin,n=e.inverseBindMatrices;t._inverseBindMatrices=n;const a=e.joints,o=a.length,r=t.sceneGraph._runtimeNodes,c=t.joints,u=t._jointMatrices;for(let d=0;d<o;d++){const t=a[d].index,e=r[t];c.push(e);const o=n[d],l=s(e,o,new i["a"]);u.push(l)}}function s(t,e,n){const a=i["a"].multiplyTransformation(t.transformToRoot,t.transform,n);return n=i["a"].multiplyTransformation(a,e,n),n}Object.defineProperties(o.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),o.prototype.updateJointMatrices=function(){const t=this._jointMatrices,e=t.length;for(let n=0;n<e;n++){const e=this.joints[n],i=this.inverseBindMatrices[n];t[n]=s(e,i,t[n])}}},"5b02":function(t,e,n){"use strict";var i=n("cef5"),a=n("52f0");const o={};function r(t,e,n){let o,s;n=a["a"].multiplyTransformation(n,t.transform,new a["a"]),t.updateComputedTransform();const c=t.runtimePrimitives.length;for(o=0;o<c;o++){const r=t.runtimePrimitives[o],c=r.drawCommands.length;for(s=0;s<c;s++){const t=r.drawCommands[s];t.modelMatrix=a["a"].multiplyTransformation(e._computedModelMatrix,n,t.modelMatrix),t.boundingVolume=i["a"].transform(r.boundingSphere,t.modelMatrix,t.boundingVolume)}}const u=t.children.length;for(o=0;o<u;o++){const i=e._runtimeNodes[t.children[o]];i._transformToRoot=a["a"].clone(n,i._transformToRoot),r(i,e,n),i._transformDirty=!1}}o.name="ModelMatrixUpdateStage",o.update=function(t,e,n){t._transformDirty&&(r(t,e,t.transformToRoot),t._transformDirty=!1)},e["a"]=o},"5e25":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("6718"),a=n("a3a3");function o(t){this.shaderBuilder=new a["a"],this.model=t,this.uniformMap={},this.alphaOptions=new i["a"],this.renderStateOptions={}}},"60e0":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("cef5"),a=n("be18"),o=n("2f63"),r=n("52f0"),s=n("0260"),c=n("283e"),u=n("b08e"),d=n("1da3"),l=n("a141");function h(){}h.getFailedLoadFunction=function(t,e,n){return function(i){let a=`Failed to load ${e}: ${n}`;Object(o["a"])(i)&&(a+="\n"+i.message),t._readyPromise.reject(new c["a"](a))}},h.getNodeTransform=function(t){return Object(o["a"])(t.matrix)?t.matrix:r["a"].fromTranslationQuaternionRotationScale(Object(o["a"])(t.translation)?t.translation:a["a"].ZERO,Object(o["a"])(t.rotation)?t.rotation:s["a"].IDENTITY,Object(o["a"])(t.scale)?t.scale:a["a"].ONE)},h.getAttributeBySemantic=function(t,e,n){const i=t.attributes,a=i.length;for(let r=0;r<a;++r){const t=i[r],a=!Object(o["a"])(n)||t.setIndex===n;if(t.semantic===e&&a)return t}},h.getAttributeByName=function(t,e){const n=t.attributes,i=n.length;for(let a=0;a<i;++a){const t=n[a];if(t.name===e)return t}},h.getFeatureIdsByLabel=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i.positionalLabel===e||i.label===e)return i}},h.hasQuantizedAttributes=function(t){if(!Object(o["a"])(t))return!1;for(let e=0;e<t.length;e++){const n=t[e];if(Object(o["a"])(n.quantization))return!0}return!1},h.getAttributeInfo=function(t){const e=t.semantic,n=t.setIndex;let i,a=!1;Object(o["a"])(e)?(i=l["a"].getVariableName(e,n),a=!0):(i=t.name,i=i.replace(/^_/,""),i=i.toLowerCase());const r=/^color_\d+$/.test(i),s=t.type;let c=d["a"].getGlslType(s);r&&(c="vec4");const u=Object(o["a"])(t.quantization);let h;return u&&(h=r?"vec4":d["a"].getGlslType(t.quantization.type)),{attribute:t,isQuantized:u,variableName:i,hasSemantic:a,glslType:c,quantizedGlslType:h}};const f=new a["a"],m=new a["a"];h.createBoundingSphere=function(t,e,n,r){const s=h.getAttributeBySemantic(t,"POSITION"),c=s.max,u=s.min;let d;if(Object(o["a"])(n)&&Object(o["a"])(r)){const t=a["a"].add(u,r,m),e=a["a"].add(c,n,f);d=i["a"].fromCornerPoints(t,e)}else d=i["a"].fromCornerPoints(u,c);return i["a"].transform(d,e,d),d},h.getAxisCorrectionMatrix=function(t,e,n){return n=r["a"].clone(r["a"].IDENTITY,n),t===u["a"].Y?n=r["a"].clone(u["a"].Y_UP_TO_Z_UP,n):t===u["a"].X&&(n=r["a"].clone(u["a"].X_UP_TO_Z_UP,n)),e===u["a"].Z&&(n=r["a"].multiplyTransformation(n,u["a"].Z_UP_TO_X_UP,n)),n}},"65e7":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("be18"),a=n("535a"),o=n("2f63"),r=n("52f0"),s=n("13b3"),c=n("5b02"),u=n("3372"),d=n("0260");function l(t){t=Object(a["a"])(t,a["a"].EMPTY_OBJECT);const e=t.sceneGraph,n=t.transform,i=t.transformToRoot,s=t.node;this._sceneGraph=e,this._children=t.children,this._node=s,this._name=s.name,this._originalTransform=r["a"].clone(n,this._originalTransform),this._transform=r["a"].clone(n,this._transform),this._transformToRoot=r["a"].clone(i,this._transformToRoot),this._originalTransform=r["a"].clone(n,this._originalTransform);const c=r["a"].multiply(i,n,new r["a"]);this._computedTransform=c,this._transformDirty=!1,this._transformParameters=Object(o["a"])(s.matrix)?void 0:new u["a"](s.translation,s.rotation,s.scale),this._morphWeights=Object(o["a"])(s.morphWeights)?s.morphWeights.slice():[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.configurePipeline()}function h(t,e){t._transformDirty=!0,t._transform=r["a"].fromTranslationRotationScale(e,t._transform)}Object.defineProperties(l.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(t){r["a"].equals(this._transform,t)||(this._transformDirty=!0,this._transform=r["a"].clone(t,this._transform))}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return Object(o["a"])(this._transformParameters)?this._transformParameters.translation:void 0},set:function(t){const e=this._transformParameters,n=e.translation;i["a"].equals(n,t)||(e.translation=i["a"].clone(t,e.translation),h(this,e))}},rotation:{get:function(){return Object(o["a"])(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(t){const e=this._transformParameters,n=e.rotation;d["a"].equals(n,t)||(e.rotation=d["a"].clone(t,e.rotation),h(this,e))}},scale:{get:function(){return Object(o["a"])(this._transformParameters)?this._transformParameters.scale:void 0},set:function(t){const e=this._transformParameters,n=e.scale;i["a"].equals(n,t)||(e.scale=i["a"].clone(t,e.scale),h(this,e))}},morphWeights:{get:function(){return this._morphWeights},set:function(t){const e=t.length;for(let n=0;n<e;n++)this._morphWeights[n]=t[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),l.prototype.getChild=function(t){return this.sceneGraph.runtimeNodes[this.children[t]]},l.prototype.configurePipeline=function(){const t=this.node,e=this.pipelineStages;e.length=0;const n=this.updateStages;n.length=0,Object(o["a"])(t.instances)&&e.push(s["a"]),n.push(c["a"])},l.prototype.updateComputedTransform=function(){this._computedTransform=r["a"].multiply(this._transformToRoot,this._transform,this._computedTransform)},l.prototype.updateJointMatrices=function(){const t=this._runtimeSkin;if(!Object(o["a"])(t))return;t.updateJointMatrices();const e=this._computedJointMatrices,n=t.jointMatrices,i=n.length;for(let a=0;a<i;a++){Object(o["a"])(e[a])||(e[a]=new r["a"]);const t=r["a"].multiplyTransformation(this.transformToRoot,this.transform,e[a]),i=r["a"].inverseTransformation(t,e[a]);e[a]=r["a"].multiplyTransformation(i,n[a],e[a])}}},6718:function(t,e,n){"use strict";function i(){this.pass=void 0,this.alphaMode=void 0,this.alphaCutoff=void 0}n.d(e,"a",(function(){return i}))},"6aa5":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("da05"),a=n("cef5"),o=n("dc1c"),r=n("535a"),s=n("2f63"),c=n("0e94"),u=n("52f0"),d=n("31ef"),l=n("0cab"),h=n("58ee"),f=n("65e7"),m=n("5ad4"),p=n("60e0"),_=n("5e25"),g=n("c5e7"),T=n("da71"),b=n("ae91"),O=n("6dc0"),y=n("c86b"),I=n("3de6");function S(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT);const e=t.modelComponents;this._model=t.model,this._components=e,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this._drawCommands=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._computedModelMatrix=u["a"].clone(u["a"].IDENTITY),this._axisCorrectionMatrix=p["a"].getAxisCorrectionMatrix(e.upAxis,e.forwardAxis,new u["a"]),A(this)}function A(t){const e=t._components,n=e.scene;E(t);const i=e.nodes,a=i.length;t._runtimeNodes=new Array(a);const o=n.nodes,r=o.length,s=u["a"].IDENTITY;for(let u=0;u<r;u++){const e=n.nodes[u],i=N(t,e,s);t._rootNodes.push(i)}const c=e.skins,d=t._runtimeSkins,l=c.length;for(let u=0;u<l;u++){const e=c[u];d.push(new m["a"]({skin:e,sceneGraph:t}))}const h=t._skinnedNodes,f=h.length;for(let u=0;u<f;u++){const e=h[u],n=t._runtimeNodes[e],a=i[e].skin,o=a.index;n._runtimeSkin=d[o],n.updateJointMatrices()}}function E(t){const e=t._components,n=t._model;t._computedModelMatrix=u["a"].multiplyTransformation(n.modelMatrix,e.transform,t._computedModelMatrix),t._computedModelMatrix=u["a"].multiplyTransformation(t._computedModelMatrix,t._axisCorrectionMatrix,t._computedModelMatrix),t._computedModelMatrix=u["a"].multiplyByUniformScale(t._computedModelMatrix,n.computedScale,t._computedModelMatrix)}function N(t,e,n){const i=[],a=p["a"].getNodeTransform(e),o=e.children.length;for(let s=0;s<o;s++){const o=e.children[s],r=u["a"].multiplyTransformation(n,a,new u["a"]),c=N(t,o,r);i.push(c)}const r=new f["a"]({node:e,transform:a,transformToRoot:n,children:i,sceneGraph:t}),c=e.primitives.length;for(let s=0;s<c;s++)r.runtimePrimitives.push(new h["a"]({primitive:e.primitives[s],node:e,model:t._model}));const d=e.index;return t._runtimeNodes[d]=r,Object(s["a"])(e.skin)&&t._skinnedNodes.push(d),d}function M(t,e){for(let n=0;n<t._runtimeNodes.length;n++){const i=t._runtimeNodes[n];for(let t=0;t<i.runtimePrimitives.length;t++){const n=i.runtimePrimitives[t];e(n)}}}Object.defineProperties(S.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}}),S.prototype.buildDrawCommands=function(t){const e=this._model,n=new _["a"](e);this.configurePipeline();const o=this.modelPipelineStages;let r,s,c;for(r=0;r<o.length;r++){const i=o[r];i.process(n,e,t)}const u=[];for(r=0;r<this._runtimeNodes.length;r++){const e=this._runtimeNodes[r];e.configurePipeline();const o=e.pipelineStages,d=new T["a"](n,e);for(s=0;s<o.length;s++){const n=o[s];n.process(d,e.node,t)}for(s=0;s<e.runtimePrimitives.length;s++){const n=e.runtimePrimitives[s];n.configurePipeline();const o=n.pipelineStages,r=new b["a"](d,n);for(c=0;c<o.length;c++){const e=o[c];e.process(r,n.primitive,t)}n.boundingSphere=a["a"].clone(r.boundingSphere),u.push(n.boundingSphere);const l=Object(i["a"])(r,t);n.drawCommands=l}}this._boundingSphere=a["a"].fromBoundingSpheres(u),e._boundingSphere=a["a"].transform(this._boundingSphere,e.modelMatrix,e._boundingSphere),e._initialRadius=e._boundingSphere.radius,e._boundingSphere.radius*=e._clampedScale},S.prototype.configurePipeline=function(){const t=this.modelPipelineStages;t.length=0;const e=this._model;Object(s["a"])(e.color)&&t.push(d["a"]),e.imageBasedLighting.enabled&&t.push(c["a"]),e.isClippingEnabled()&&t.push(l["a"]),Object(s["a"])(e.splitDirection)&&e.splitDirection!==I["a"].NONE&&t.push(g["a"])},S.prototype.update=function(t,e){let n,i,a;for(n=0;n<this._runtimeNodes.length;n++){const o=this._runtimeNodes[n];for(i=0;i<o.updateStages.length;i++){const e=o.updateStages[i];e.update(o,this,t)}for(e&&this.updateJointMatrices(),i=0;i<o.runtimePrimitives.length;i++){const t=o.runtimePrimitives[i];for(a=0;a<t.updateStages.length;a++){const e=t.updateStages[a];e.update(t)}}}},S.prototype.updateModelMatrix=function(){E(this);const t=this._rootNodes;for(let e=0;e<t.length;e++){const n=this._runtimeNodes[t[e]];n._transformDirty=!0}},S.prototype.updateJointMatrices=function(){const t=this._skinnedNodes,e=t.length;for(let n=0;n<e;n++){const e=t[n],i=this._runtimeNodes[e];i.updateJointMatrices()}},S.prototype.updateBackFaceCulling=function(t){const e=this._model;M(this,(function(n){for(let i=0;i<n.drawCommands.length;i++){const a=n.drawCommands[i],r=Object(o["a"])(a.renderState,!0),c=n.primitive.material.doubleSided,u=Object(s["a"])(e.color)&&e.color.alpha<1;r.cull.enabled=t&&!c&&!u,a.renderState=O["a"].fromCache(r)}}))},S.prototype.updateShadows=function(t){const e=this._model,n=y["a"].castShadows(e.shadows),i=y["a"].receiveShadows(e.shadows);M(this,(function(t){for(let e=0;e<t.drawCommands.length;e++){const a=t.drawCommands[e];a.castShadows=n,a.receiveShadows=i}}))},S.prototype.getDrawCommands=function(){const t=[];return M(this,(function(e){t.push.apply(t,e.drawCommands)})),t}},"6b2f":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("bd8d"),a=n("2f63");function o(t){this._model=t.model,this._featureTable=t.featureTable,this._featureId=t.featureId,this._color=void 0}Object.defineProperties(o.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(t){this._featureTable.setShow(this._featureId,t)}},color:{get:function(){return Object(a["a"])(this._color)||(this._color=new i["a"]),this._featureTable.getColor(this._featureId,this._color)},set:function(t){this._featureTable.setColor(this._featureId,t)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}}),o.prototype.hasProperty=function(t){return this._featureTable.hasProperty(this._featureId,t)},o.prototype.getProperty=function(t){return this._featureTable.getProperty(this._featureId,t)},o.prototype.getPropertyInherited=function(t){return this._featureTable.hasPropertyBySemantic(this._featureId,t)?this._featureTable.getPropertyBySemantic(this._featureId,t):this._featureTable.getProperty(this._featureId,t)},o.prototype.getPropertyNames=function(t){return this._featureTable.getPropertyNames(t)},o.prototype.setProperty=function(t,e){return this._featureTable.setProperty(this._featureId,t,e)}},"7c52":function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var i=n("cef5"),a=n("be18"),o=n("c1f7"),r=n("43ee"),s=n("2f63"),c=n("9c35"),u=n("535a"),d=n("2453"),l=n("8bd8"),h=n("c593"),f=n("6aa5"),m=n("d887"),p=n("60e0"),_=n("d289"),g=n("d4ed"),T=n("7d62"),b=n("df07"),O=n("52f0"),y=n("1972"),I=n("7b4a"),S=n("cb84"),A=n("8dff"),E=n("bd8d"),N=n("cbc3"),M=n("c86b"),C=n("3de6");function P(t){t=Object(u["a"])(t,u["a"].EMPTY_OBJECT),this._loader=t.loader,this._resource=t.resource,this.type=Object(u["a"])(t.type,m["a"].GLTF),this.modelMatrix=O["a"].clone(Object(u["a"])(t.modelMatrix,O["a"].IDENTITY)),this._modelMatrix=O["a"].clone(this.modelMatrix),this._scale=Object(u["a"])(t.scale,1),this._minimumPixelSize=Object(u["a"])(t.minimumPixelSize,0),this._maximumScale=t.maximumScale,this._clampedScale=Object(s["a"])(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=b["a"].clone(b["a"].IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._readyPromise=Object(c["a"])(),this._customShader=t.customShader,this._content=t.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new h["a"](this),this._clampAnimations=Object(u["a"])(t.clampAnimations,!0);const e=t.color;this._color=Object(u["a"])(e)?E["a"].clone(e):void 0,this._colorBlendMode=Object(u["a"])(t.colorBlendMode,o["a"].HIGHLIGHT),this._colorBlendAmount=Object(u["a"])(t.colorBlendAmount,.5),this._cull=Object(u["a"])(t.cull,!0),this._opaquePass=Object(u["a"])(t.opaquePass,_["a"].OPAQUE),this._allowPicking=Object(u["a"])(t.allowPicking,!0),this._show=Object(u["a"])(t.show,!0),this._style=void 0;let n=Object(u["a"])(t.featureIdLabel,"featureId_0");"number"===typeof n&&(n="featureId_"+n),this._featureIdLabel=n;let d=Object(u["a"])(t.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof d&&(d="instanceFeatureId_"+d),this._instanceFeatureIdLabel=d,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._resources=[],this._boundingSphere=new i["a"],this._initialRadius=void 0;const f=new I["a"](t.pointCloudShading);this._attenuation=f.attenuation,this._pointCloudShading=f;const p=t.clippingPlanes;Object(s["a"])(p)&&void 0===p.owner?r["a"].setOwner(p,this,"_clippingPlanes"):this._clippingPlanes=p,this._clippingPlanesState=0,this._clippingPlanesMatrix=O["a"].clone(O["a"].IDENTITY),this._lightColor=a["a"].clone(t.lightColor),this._imageBasedLighting=Object(s["a"])(t.imageBasedLighting)?t.imageBasedLighting:new l["a"],this._shouldDestroyImageBasedLighting=!Object(s["a"])(t.imageBasedLighting),this._backFaceCulling=Object(u["a"])(t.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=Object(u["a"])(t.shadows,M["a"].ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=Object(u["a"])(t.debugShowBoundingVolume,!1),this._debugWireframe=Object(u["a"])(t.debugWireframe,!1),this._showCreditsOnScreen=Object(u["a"])(t.showCreditsOnScreen,!1),this._splitDirection=Object(u["a"])(t.splitDirection,C["a"].NONE),D(this)}function L(t,e){const n=t._featureTables,i=e.propertyTables;for(let a=0;a<i.length;a++){const e=i[a],o=new y["a"]({model:t,propertyTable:e});n.push(o)}return n}function R(t,e){const n=e._featureIdLabel,i=e._instanceFeatureIdLabel;let a,o,r,c;for(a=0;a<t.nodes.length;a++)if(c=t.nodes[a],Object(s["a"])(c.instances)&&(r=p["a"].getFeatureIdsByLabel(c.instances.featureIds,i),Object(s["a"])(r)&&Object(s["a"])(r.propertyTableId)))return r.propertyTableId;for(a=0;a<t.nodes.length;a++)for(c=t.nodes[a],o=0;o<c.primitives.length;o++){const t=c.primitives[o],e=p["a"].getFeatureIdsByLabel(t.featureIds,n);if(Object(s["a"])(e))return e.propertyTableId}}function D(t){const e=t._loader,n=t._resource;e.load(),e.promise.then((function(e){const n=e.components,i=n.structuralMetadata;Object(s["a"])(i)&&i.propertyTableCount>0&&L(t,i),t._sceneGraph=new f["a"]({model:t,modelComponents:n}),t._resourcesLoaded=!0})).catch(p["a"].getFailedLoadFunction(t,"model",n));const i=Object(u["a"])(e.texturesLoadedPromise,Promise.resolve());i.then((function(){t._texturesLoaded=!0})).catch(p["a"].getFailedLoadFunction(t,"model",n))}Object.defineProperties(P.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},loader:{get:function(){return this._loader}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(t){this._clampAnimations=t}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(t){t!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=t}},customShader:{get:function(){return this._customShader},set:function(t){t!==this._customShader&&this.resetDrawCommands(),this._customShader=t}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(t){this._featureTableId=t}},featureTables:{get:function(){return this._featureTables},set:function(t){this._featureTables=t}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(t){t!==this._style&&this.applyStyle(t),this._style=t}},color:{get:function(){return this._color},set:function(t){E["a"].equals(this._color,t)||this.resetDrawCommands(),this._color=E["a"].clone(t,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(t){this._colorBlendMode=t}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(t){this._colorBlendAmount=t}},boundingSphere:{get:function(){return this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(t){this._debugShowBoundingVolume!==t&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=t}},debugWireframe:{get:function(){return this._debugWireframe},set:function(t){this._debugWireframe!==t&&this.resetDrawCommands(),this._debugWireframe=t}},show:{get:function(){return this._show},set:function(t){this._show=t}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(t){"number"===typeof t&&(t="featureId_"+t),t!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=t}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(t){"number"===typeof t&&(t="instanceFeatureId_"+t),t!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=t}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(t){t!==this._clippingPlanes&&(r["a"].setOwner(t,this,"_clippingPlanes"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(t){Object(s["a"])(t)!==Object(s["a"])(this._lightColor)&&this.resetDrawCommands(),this._lightColor=a["a"].clone(t,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(t){t!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=t,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(t){t!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=t}},scale:{get:function(){return this._scale},set:function(t){t!==this._scale&&(this._updateModelMatrix=!0),this._scale=t}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(t){t!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=t}},maximumScale:{get:function(){return this._maximumScale},set:function(t){t!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=t}},shadows:{get:function(){return this._shadows},set:function(t){t!==this._shadows&&(this._shadowsDirty=!0),this._shadows=t}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(t){this._showCreditsOnScreen=t}},splitDirection:{get:function(){return this._splitDirection},set:function(t){this._splitDirection!==t&&this.resetDrawCommands(),this._splitDirection=t}}}),P.prototype.resetDrawCommands=function(){this._drawCommandsBuilt&&(this.destroyResources(),this._drawCommandsBuilt=!1)};const F=new O["a"],w=new b["a"],x=new O["a"];function v(t){const e=t._sceneGraph.components,n=e.structuralMetadata;Object(s["a"])(n)&&n.propertyTableCount>0&&(t.featureTableId=R(e,t),t.applyStyle(t._style))}P.prototype.update=function(t){this._resourcesLoaded&&this._texturesLoaded||this._loader.process(t),Object(s["a"])(this._customShader)&&this._customShader.update(t),this.pointCloudShading.attenuation!==this._attenuation&&(this.resetDrawCommands(),this._attenuation=this.pointCloudShading.attenuation);const e=t.context,n=Object(u["a"])(this.referenceMatrix,this.modelMatrix);if(this._imageBasedLighting.update(t),this._imageBasedLighting.useSphericalHarmonicCoefficients||this._imageBasedLighting.useSpecularEnvironmentMaps){let t=w,i=F;i=O["a"].multiply(e.uniformState.view3D,n,i),t=O["a"].getMatrix3(i,t),t=b["a"].getRotation(t,t),this._iblReferenceFrameMatrix=b["a"].transpose(t,this._iblReferenceFrameMatrix)}this._imageBasedLighting.shouldRegenerateShaders&&this.resetDrawCommands();let a=0;if(this.isClippingEnabled()){this._clippingPlanes.owner===this&&this._clippingPlanes.update(t);let i=x;i=O["a"].multiply(e.uniformState.view3D,n,i),i=O["a"].multiply(i,this._clippingPlanes.modelMatrix,i),this._clippingPlanesMatrix=O["a"].inverseTranspose(i,this._clippingPlanesMatrix),a=this._clippingPlanes.clippingPlanesState}if(a!==this._clippingPlanesState&&(this.resetDrawCommands(),this._clippingPlanesState=a),this._defaultTexture=e.defaultTexture,!this._resourcesLoaded)return;this._featureTableIdDirty&&(v(this),this._featureTableIdDirty=!1);const o=this._featureTables;for(let i=0;i<o.length;i++)o[i].update(t),o[i].styleCommandsNeededDirty&&this.resetDrawCommands();if(!this._drawCommandsBuilt){this._sceneGraph.buildDrawCommands(t),this._drawCommandsBuilt=!0;const e=this;if(!e._ready)return void t.afterRender.push((function(){e._ready=!0,e._readyPromise.resolve(e)}))}this._debugShowBoundingVolumeDirty&&(k(this._sceneGraph,this._debugShowBoundingVolume),this._debugShowBoundingVolumeDirty=!1),O["a"].equals(this.modelMatrix,this._modelMatrix)||(this._updateModelMatrix=!0,this._modelMatrix=O["a"].clone(this.modelMatrix,this._modelMatrix),this._boundingSphere=i["a"].transform(this._sceneGraph.boundingSphere,this.modelMatrix,this._boundingSphere)),(this._updateModelMatrix||0!==this._minimumPixelSize)&&(this._clampedScale=Object(s["a"])(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._boundingSphere.radius=this._initialRadius*this._clampedScale,this._computedScale=U(this,t),this._sceneGraph.updateModelMatrix(),this._updateModelMatrix=!1),this._backFaceCullingDirty&&(this.sceneGraph.updateBackFaceCulling(this._backFaceCulling),this._backFaceCullingDirty=!1),this._shadowsDirty&&(this.sceneGraph.updateShadows(this._shadows),this._shadowsDirty=!1);const r=this._activeAnimations.update(t);if(this._sceneGraph.update(t,r),this._show&&0!==this._computedScale){const e=this._sceneGraph.components.asset,n=e.credits,i=n.length;for(let o=0;o<i;o++){const e=n[o];e.showOnScreen=this._showCreditsOnScreen,t.creditDisplay.addCredit(e)}const a=this._sceneGraph.getDrawCommands();t.commandList.push.apply(t.commandList,a)}};const j=new i["a"];function B(t,e,n){return j.center=t,j.radius=e,n.camera.getPixelSize(j,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}const G=new a["a"];function U(t,e){let n=t.scale;if(0!==t.minimumPixelSize){const i=e.context,a=Math.max(i.drawingBufferWidth,i.drawingBufferHeight),o=t.modelMatrix;G.x=o[12],G.y=o[13],G.z=o[14];const r=t.boundingSphere.radius,s=B(G,r,e),c=1/s,u=Math.min(c*(2*r),a);u<t.minimumPixelSize&&(n=t.minimumPixelSize*s/(2*t._initialRadius))}return Object(s["a"])(t.maximumScale)?Math.min(t.maximumScale,n):n}function k(t,e){const n=t._drawCommands;for(let i=0;i<n.length;i++)n[i].debugShowBoundingVolume=e}function V(t,e,n){return{loader:t,type:e,resource:n.resource,modelMatrix:n.modelMatrix,scale:n.scale,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,debugShowBoundingVolume:n.debugShowBoundingVolume,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,allowPicking:n.allowPicking,customShader:n.customShader,content:n.content,show:n.show,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,clippingPlanes:n.clippingPlanes,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,shadows:n.shadows,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection}}P.prototype.isClippingEnabled=function(){const t=this._clippingPlanes;return Object(s["a"])(t)&&t.enabled&&0!==t.length},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){const t=this._loader;Object(s["a"])(t)&&t.destroy();const e=this._featureTables;if(Object(s["a"])(e))for(let i=0;i<e.length;i++)e[i].destroy();this.destroyResources();const n=this._clippingPlanes;Object(s["a"])(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(T["a"])(this)},P.prototype.destroyResources=function(){const t=this._resources;for(let e=0;e<t.length;e++)t[e].destroy();this._resources=[]},P.fromGltf=function(t){t=Object(u["a"])(t,u["a"].EMPTY_OBJECT);const e={releaseGltfJson:t.releaseGltfJson,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis},n=t.gltf,i=Object(u["a"])(t.basePath,""),a=g["a"].createIfNeeded(i);Object(s["a"])(n.asset)?(e.gltfJson=n,e.baseResource=a,e.gltfResource=a):n instanceof Uint8Array?(e.typedArray=n,e.baseResource=a,e.gltfResource=a):e.gltfResource=g["a"].createIfNeeded(t.gltf);const o=new d["a"](e),r=Object(s["a"])(t.content),c=r?m["a"].TILE_GLTF:m["a"].GLTF,l=V(o,c,t);l.resource=e.gltfResource;const h=new P(l);return h},P.fromB3dm=function(t){const e={b3dmResource:t.resource,arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset,releaseGltfJson:t.releaseGltfJson,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis},n=new S["a"](e),i=V(n,m["a"].TILE_B3DM,t),a=new P(i);return a},P.fromPnts=function(t){const e={arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset},n=new A["a"](e),i=V(n,m["a"].TILE_PNTS,t),a=new P(i);return a},P.fromI3dm=function(t){const e={i3dmResource:t.resource,arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset,releaseGltfJson:t.releaseGltfJson,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis},n=new N["a"](e),i=V(n,m["a"].TILE_I3DM,t),a=new P(i);return a},P.prototype.applyColorAndShow=function(t){const e=Object(s["a"])(t)&&Object(s["a"])(t.color),n=Object(s["a"])(t)&&Object(s["a"])(t.show);this._color=e?t.color.evaluateColor(void 0,this._color):E["a"].clone(E["a"].WHITE,this._color),this._show=!n||t.show.evaluate(void 0)},P.prototype.applyStyle=function(t){if(Object(s["a"])(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0){const e=this.featureTables[this.featureTableId];e.applyStyle(t)}else this.applyColorAndShow(t);this.resetDrawCommands()}},"8dff":function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var i=n("c8d1"),a=n("be18"),o=n("bd8d"),r=n("abab"),s=n("535a"),c=n("9c35"),u=n("2f63"),d=n("52f0"),l=n("1b8d"),h=n("7aae"),f=n("f20a"),m=n("8b68"),p=n("9fb6"),_=n("1da3"),g=n("b08e"),T=n("fa74"),b=n("08b8"),O=n("fdb7"),y=n("aa13"),I=n("21d4"),S=n("8bde"),A=n("b005"),E=n("a7eb"),N=n("2773"),M=n("a141");const C=S["a"].Components,P=S["a"].Scene,L=S["a"].Node,R=S["a"].Primitive,D=S["a"].Attribute,F=S["a"].Quantization,w=S["a"].FeatureIdAttribute,x=S["a"].Material,v=S["a"].MetallicRoughness;function j(t){t=Object(s["a"])(t,s["a"].EMPTY_OBJECT);const e=t.arrayBuffer,n=Object(s["a"])(t.byteOffset,0);this._arrayBuffer=e,this._byteOffset=n,this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=Object(c["a"])(),this._state=N["a"].UNLOADED,this._buffers=[],this._components=void 0,this._transform=d["a"].IDENTITY}function B(t,e){const n=t._parsedContent,i=n.draco;let a;a=Object(u["a"])(i)?b["a"].decodePointCloud(i,e):Promise.resolve(),Object(u["a"])(a)&&(t._decodePromise=a,a.then((function(n){t.isDestroyed()||(Object(u["a"])(n)&&G(t,i,n),Z(t,e),t._state=N["a"].READY,t._promise.resolve(t))})).catch((function(e){t.unload(),t._state=N["a"].FAILED;const n="Failed to load Draco";t._promise.reject(t.getError(n,e))})))}function G(t,e,n){t._state=N["a"].READY;const i=t._parsedContent;let o;if(Object(u["a"])(n.POSITION)){if(o={name:"POSITION",semantic:M["a"].POSITION,typedArray:n.POSITION.array,componentDatatype:r["a"].FLOAT,type:_["a"].VEC3,isQuantized:!1},Object(u["a"])(n.POSITION.data.quantization)){const t=n.POSITION.data.quantization,e=t.range,i=a["a"].fromElements(e,e,e),s=a["a"].unpack(t.minValues),c=(1<<t.quantizationBits)-1;o.isQuantized=!0,o.quantizedRange=c,o.quantizedVolumeOffset=s,o.quantizedVolumeScale=i,o.quantizedComponentDatatype=r["a"].UNSIGNED_SHORT,o.quantizedType=_["a"].VEC3}i.positions=o}if(Object(u["a"])(n.NORMAL)){if(o={name:"NORMAL",semantic:M["a"].NORMAL,typedArray:n.NORMAL.array,componentDatatype:r["a"].FLOAT,type:_["a"].VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},Object(u["a"])(n.NORMAL.data.quantization)){const t=(1<<n.NORMAL.data.quantization.quantizationBits)-1;o.quantizedRange=t,o.octEncoded=!0,o.octEncodedZXY=!0,o.quantizedComponentDatatype=r["a"].UNSIGNED_BYTE,o.quantizedType=_["a"].VEC2}i.normals=o}if(Object(u["a"])(n.RGBA)?i.colors={name:"COLOR",semantic:M["a"].COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:r["a"].UNSIGNED_BYTE,type:_["a"].VEC4,normalized:!0,isTranslucent:!0}:Object(u["a"])(n.RGB)&&(i.colors={name:"COLOR",semantic:M["a"].COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:r["a"].UNSIGNED_BYTE,type:_["a"].VEC3,normalized:!0,isTranslucent:!1}),Object(u["a"])(n.BATCH_ID)){const t=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:M["a"].FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:r["a"].fromTypedArray(t),type:_["a"].SCALAR}}let s=i.styleableProperties;const c=e.batchTableProperties;for(const a in c)if(c.hasOwnProperty(a)){const t=n[a];Object(u["a"])(s)||(s={}),s[a]={typedArray:t.array,componentCount:t.data.componentsPerAttribute}}i.styleableProperties=s}function U(t,e,n){let r,c=e.typedArray;if(e.octEncoded&&(r=new F,r.octEncoded=e.octEncoded,r.octEncodedZXY=e.octEncodedZXY,r.normalizationRange=e.quantizedRange,r.type=e.quantizedType,r.componentDatatype=e.quantizedComponentDatatype),e.isQuantized){r=new F;const t=e.quantizedRange;r.normalizationRange=t,r.quantizedVolumeOffset=a["a"].ZERO;const n=e.quantizedVolumeScale;r.quantizedVolumeDimensions=n,r.quantizedVolumeStepSize=a["a"].divideByScalar(n,t,new a["a"]),r.componentDatatype=e.quantizedComponentDatatype,r.type=e.quantizedType}const d=new D;if(d.name=e.name,d.semantic=e.semantic,d.setIndex=e.setIndex,d.componentDatatype=e.componentDatatype,d.type=e.type,d.normalized=Object(s["a"])(e.normalized,!1),d.min=e.min,d.max=e.max,d.quantization=r,e.isRGB565&&(c=i["a"].decodeRGB565(c)),Object(u["a"])(e.constantColor)){const t=new Array(4);d.constant=o["a"].pack(e.constantColor,t)}else{const e=f["a"].createVertexBuffer({typedArray:c,context:n,usage:m["a"].STATIC_DRAW});e.vertexArrayDestroyable=!1,t._buffers.push(e),d.buffer=e}return d}let k,V;function z(t){if(!Object(u["a"])(V)){k=new h["a"](0),V=new Array(t);for(let e=0;e<t;++e)V[e]=k.random()}return V}Object(u["a"])(Object.create)&&(j.prototype=Object.create(y["a"].prototype),j.prototype.constructor=j),Object.defineProperties(j.prototype,{promise:{get:function(){return this._promise.promise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}}),j.prototype.load=function(){this._parsedContent=A["a"].parse(this._arrayBuffer,this._byteOffset),this._state=N["a"].PROCESSING},j.prototype.process=function(t){this._state===N["a"].PROCESSING&&(Object(u["a"])(this._decodePromise)||B(this,t.context))};const H=new a["a"],q=new a["a"],W=new a["a"];function Y(t){const e=t.typedArray,n=20,i=e.length/3,o=Math.min(i,n),r=z(n),s=Number.MAX_VALUE,c=-Number.MAX_VALUE;let u,d,l,h=a["a"].fromElements(s,s,s,H),f=a["a"].fromElements(c,c,c,q);if(t.isQuantized)h=a["a"].ZERO,f=t.quantizedVolumeScale;else for(u=0;u<o;++u)d=Math.floor(r[u]*i),l=a["a"].unpack(e,3*d,W),a["a"].minimumByComponent(h,l,h),a["a"].maximumByComponent(f,l,f);t.min=a["a"].clone(h),t.max=a["a"].clone(f)}const J={name:M["a"].COLOR,semantic:M["a"].COLOR,setIndex:0,constantColor:o["a"].DARKGRAY,componentDatatype:r["a"].FLOAT,type:_["a"].VEC4,isQuantized:!1,isTranslucent:!1};function X(t,e,n){const i=[];let a;const o=e.positions;return Object(u["a"])(o)&&(Y(o),a=U(t,o,n),a.count=e.pointsLength,i.push(a)),Object(u["a"])(e.normals)&&(a=U(t,e.normals,n),i.push(a)),Object(u["a"])(e.colors)?(a=U(t,e.colors,n),i.push(a)):(a=U(t,J,n),i.push(a)),Object(u["a"])(e.batchIds)&&(a=U(t,e.batchIds,n),i.push(a)),i}function $(t){const e=t.batchLength,n=t.pointsLength,i=t.batchTableBinary;if(Object(u["a"])(i)){const a=Object(s["a"])(e,n);return Object(T["a"])({count:a,batchTable:t.batchTableJson,binaryBody:i})}const a=new E["a"]({name:I["a"].BATCH_TABLE_CLASS_NAME,count:n});return new O["a"]({schema:{},propertyTables:[a]})}function Z(t,e){const n=t._parsedContent,i=new v;i.metallicFactor=0,i.roughnessFactor=.9;const a=new x;a.metallicRoughness=i;const o=n.colors;Object(u["a"])(o)&&o.isTranslucent&&(a.alphaMode=p["a"].BLEND);const r=!Object(u["a"])(n.normals);a.unlit=r;const s=new R;if(s.attributes=X(t,n,e),s.primitiveType=l["a"].POINTS,s.material=a,Object(u["a"])(n.batchIds)){const t=new w;t.propertyTableId=0,t.setIndex=0,t.positionalLabel="featureId_0",s.featureIds.push(t)}const c=new L;c.index=0,c.primitives=[s];const h=new P;h.nodes=[c],h.upAxis=g["a"].Z,h.forwardAxis=g["a"].X;const f=new C;f.scene=h,f.nodes=[c],f.structuralMetadata=$(n),Object(u["a"])(n.rtcCenter)&&(f.transform=d["a"].multiplyByTranslation(f.transform,n.rtcCenter,f.transform));const m=n.positions;Object(u["a"])(m)&&m.isQuantized&&(f.transform=d["a"].multiplyByTranslation(f.transform,m.quantizedVolumeOffset,f.transform)),t._components=f,t._parsedContent=void 0}j.prototype.unload=function(){const t=this._buffers;for(let e=0;e<t.length;e++)t[e].destroy();t.length=0,this._components=void 0,this._parsedContent=void 0}},c593:function(t,e,n){"use strict";var i=n("535a"),a=n("2f63"),o=n("21d7"),r=n("5ed2"),s=n("93da"),c=n("45cb"),u=n("8a9e"),d=n("9007");function l(t){this.animationAdded=new o["a"],this.animationRemoved=new o["a"],this._model=t,this._runtimeAnimations=[],this._previousTime=void 0}function h(t,e,n){const i=t._model,a=new c["a"](i,e,n);return t._runtimeAnimations.push(a),t.animationAdded.raiseEvent(i,a),a}Object.defineProperties(l.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),l.prototype.add=function(t){t=Object(i["a"])(t,i["a"].EMPTY_OBJECT);const e=this._model,n=e.sceneGraph.components.animations;let o=t.index;if(Object(a["a"])(o))return h(this,n[o],t);const r=n.length;for(let i=0;i<r;++i)if(n[i].name===t.name){o=i;break}return h(this,n[o],t)},l.prototype.addAll=function(t){t=Object(i["a"])(t,i["a"].EMPTY_OBJECT);const e=this._model,n=e.sceneGraph.components.animations,a=[],o=n.length;for(let i=0;i<o;++i){const e=h(this,n[i],t);a.push(e)}return a},l.prototype.remove=function(t){if(!Object(a["a"])(t))return!1;const e=this._runtimeAnimations,n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.animationRemoved.raiseEvent(this._model,t),!0)},l.prototype.removeAll=function(){const t=this._model,e=this._runtimeAnimations,n=e.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(t,e[i])},l.prototype.contains=function(t){return!!Object(a["a"])(t)&&-1!==this._runtimeAnimations.indexOf(t)},l.prototype.get=function(t){return this._runtimeAnimations[t]};const f=[];function m(t,e,n){return function(){t.animationRemoved.raiseEvent(e,n)}}l.prototype.update=function(t){const e=this._runtimeAnimations;let n=e.length;if(0===n)return this._previousTime=void 0,!1;if(r["a"].equals(t.time,this._previousTime))return!1;this._previousTime=r["a"].clone(t.time,this._previousTime);let o=!1;const c=t.time,l=this._model;for(let h=0;h<n;++h){const n=e[h];Object(a["a"])(n._computedStartTime)||(n._computedStartTime=r["a"].addSeconds(Object(i["a"])(n.startTime,c),n.delay,new r["a"])),Object(a["a"])(n._duration)||(n._duration=n.localStopTime*(1/n.multiplier));const l=n._computedStartTime,m=n._duration,p=n.stopTime;let _=0!==m?r["a"].secondsDifference(c,l)/m:0;0!==m&&Object(a["a"])(p)&&r["a"].greaterThan(c,p)&&(_=r["a"].secondsDifference(p,l)/m);const g=_>=0,T=n.loop===u["a"].REPEAT||n.loop===u["a"].MIRRORED_REPEAT,b=Object(a["a"])(p)&&r["a"].greaterThan(c,p),O=(g||T&&!Object(a["a"])(n.startTime))&&(_<=1||T)&&!b;if(O||n._state===d["a"].ANIMATING){if(O&&n._state===d["a"].STOPPED&&(n._state=d["a"].ANIMATING,n.start.numberOfListeners>0&&t.afterRender.push(n._raiseStartEvent)),n.loop===u["a"].REPEAT)_-=Math.floor(_);else if(n.loop===u["a"].MIRRORED_REPEAT){const t=Math.floor(_),e=_-t;_=t%2===1?1-e:e}n.reverse&&(_=1-_);let e=_*m*n.multiplier;e=s["a"].clamp(e,n.localStartTime,n.localStopTime),n.animate(e),n.update.numberOfListeners>0&&(n._updateEventTime=e,t.afterRender.push(n._raiseUpdateEvent)),o=!0,O||(n._state=d["a"].STOPPED,n.stop.numberOfListeners>0&&t.afterRender.push(n._raiseStopEvent),n.removeOnStop&&f.push(n))}}n=f.length;for(let i=0;i<n;++i){const n=f[i];e.splice(e.indexOf(n),1),t.afterRender.push(m(this,l,n))}return f.length=0,o},e["a"]=l},c5e7:function(t,e,n){"use strict";var i=n("2bb9"),a=n("4432"),o=n("ef54");const r={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection",process:function(t,e,n){const s=t.shaderBuilder;s.addDefine("HAS_MODEL_SPLITTER",void 0,o["a"].FRAGMENT),s.addFragmentLines([a["a"]]);const c={};s.addUniform("float",r.SPLIT_DIRECTION_UNIFORM_NAME,o["a"].FRAGMENT),c[r.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return e.splitDirection},t.uniformMap=Object(i["a"])(c,t.uniformMap)}};e["a"]=r},c7f8:function(t,e,n){"use strict";var i=n("2f63"),a=n("ef54"),o=n("3e36"),r=n("2fe8"),s=n("60e0");const c={};function u(t){t.addStruct(c.STRUCT_ID_METADATA_VS,c.STRUCT_NAME_METADATA,a["a"].VERTEX),t.addStruct(c.STRUCT_ID_METADATA_FS,c.STRUCT_NAME_METADATA,a["a"].FRAGMENT),t.addFunction(c.FUNCTION_ID_INITIALIZE_METADATA_VS,c.FUNCTION_SIGNATURE_INITIALIZE_METADATA,a["a"].VERTEX),t.addFunction(c.FUNCTION_ID_INITIALIZE_METADATA_FS,c.FUNCTION_SIGNATURE_INITIALIZE_METADATA,a["a"].FRAGMENT),t.addFunction(c.FUNCTION_ID_SET_METADATA_VARYINGS,c.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,a["a"].VERTEX)}function d(t,e,n){const a=n.propertyAttributes;if(Object(i["a"])(a))for(let i=0;i<a.length;i++){const n=a[i],o=n.properties;for(const i in o)if(o.hasOwnProperty(i)){const n=o[i],a=s["a"].getAttributeByName(e,n.attribute),r=s["a"].getAttributeInfo(a);l(t,r,i,n)}}}function l(t,e,n,i){const o=_(n),r=e.variableName,s=e.glslType,u=t.shaderBuilder;u.addStructField(c.STRUCT_ID_METADATA_VS,s,o),u.addStructField(c.STRUCT_ID_METADATA_FS,s,o);let d="attributes."+r;i.hasValueTransform&&(d=p(d,{renderResources:t,glslType:s,metadataVariable:o,shaderDestination:a["a"].BOTH,offset:i.offset,scale:i.scale}));const l=`metadata.${o} = ${d};`;u.addFunctionLines(c.FUNCTION_ID_INITIALIZE_METADATA_VS,[l]),u.addFunctionLines(c.FUNCTION_ID_INITIALIZE_METADATA_FS,[l])}function h(t,e){const n=e.propertyTextures;if(Object(i["a"])(n))for(let i=0;i<n.length;i++){const e=n[i],a=e.properties;for(const n in a)if(a.hasOwnProperty(n)){const e=a[n];e.isGpuCompatible()&&f(t,n,e)}}}function f(t,e,n){const i=n.textureReader,o=i.index,r="u_propertyTexture_"+o;t.uniformMap.hasOwnProperty(r)||m(t,r,i);const s=_(e),u=n.getGlslType(),d=t.shaderBuilder;d.addStructField(c.STRUCT_ID_METADATA_FS,u,s);const l=i.texCoord,h="attributes.texCoord_"+l,f=i.channels;let g=`texture2D(${r}, ${h}).${f}`;g=n.unpackInShader(g),n.hasValueTransform&&(g=p(g,{renderResources:t,glslType:u,metadataVariable:s,shaderDestination:a["a"].FRAGMENT,offset:n.offset,scale:n.scale}));const T=`metadata.${s} = ${g};`;d.addFunctionLines(c.FUNCTION_ID_INITIALIZE_METADATA_FS,[T])}function m(t,e,n){const i=t.shaderBuilder;i.addUniform("sampler2D",e,a["a"].FRAGMENT);const o=t.uniformMap;o[e]=function(){return n.texture}}function p(t,e){const n=e.metadataVariable,i=`u_${n}_offset`,a=`u_${n}_scale`,o=e.renderResources,r=o.shaderBuilder,s=e.glslType,c=e.shaderDestination;r.addUniform(s,i,c),r.addUniform(s,a,c);const u=o.uniformMap;return u[i]=function(){return e.offset},u[a]=function(){return e.scale},`czm_valueTransform(${i}, ${a}, ${t})`}function _(t){return t.replaceAll(/[^_a-zA-Z0-9]+/g,"_")}c.name="MetadataPipelineStage",c.STRUCT_ID_METADATA_VS="MetadataVS",c.STRUCT_ID_METADATA_FS="MetadataFS",c.STRUCT_NAME_METADATA="Metadata",c.FUNCTION_ID_INITIALIZE_METADATA_VS="initializeMetadataVS",c.FUNCTION_ID_INITIALIZE_METADATA_FS="initializeMetadataFS",c.FUNCTION_SIGNATURE_INITIALIZE_METADATA="void initializeMetadata(out Metadata metadata, ProcessedAttributes attributes)",c.FUNCTION_ID_SET_METADATA_VARYINGS="setMetadataVaryings",c.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS="void setMetadataVaryings()",c.process=function(t,e,n){const a=t.shaderBuilder;u(a),a.addVertexLines([r["a"]]),a.addFragmentLines([o["a"]]);const s=t.model.structuralMetadata;Object(i["a"])(s)&&(d(t,e,s),h(t,s))},e["a"]=c},c8d19:function(t,e,n){"use strict";var i=n("f20a"),a=n("8b68"),o=n("bd8d"),r=n("abab"),s=n("535a"),c=n("2f63"),u=n("ef54"),d=n("d887"),l=n("60e0");const h={};function f(t,e){const n=t.model,i={model:n,node:t.runtimeNode,primitive:t.runtimePrimitive};let a;if(d["a"].is3DTiles(n.type)){const t=n.content;a={content:t,primitive:t.tileset,detail:i}}else a={primitive:n,detail:i};return Object(c["a"])(e)&&(a.instanceId=e),a}function m(t,e,n){const i=t.model;let a,o;const r=i.featureIdLabel,d=i.instanceFeatureIdLabel;Object(c["a"])(i.featureTableId)?a=i.featureTableId:Object(c["a"])(n)?(o=l["a"].getFeatureIdsByLabel(n.featureIds,d),a=o.propertyTableId):(o=l["a"].getFeatureIdsByLabel(e.featureIds,r),a=o.propertyTableId);const h=i.featureTables[a],f=t.shaderBuilder;f.addUniform("sampler2D","model_pickTexture",u["a"].FRAGMENT);const m=h.batchTexture;t.uniformMap.model_pickTexture=function(){return Object(s["a"])(m.pickTexture,m.defaultTexture)},t.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture2D(model_pickTexture, selectedFeature.st) : vec4(0.0))"}function p(t,e,n){const s=t.instanceCount,c=new Array(s),d=new Uint8Array(4*s),l=t.model,h=l._resources;for(let i=0;i<s;i++){const e=f(t,i),a=n.createPickId(e);h.push(a),c[i]=a;const r=a.color;d[4*i+0]=o["a"].floatToByte(r.red),d[4*i+1]=o["a"].floatToByte(r.green),d[4*i+2]=o["a"].floatToByte(r.blue),d[4*i+3]=o["a"].floatToByte(r.alpha)}const m=i["a"].createVertexBuffer({context:n,typedArray:d,usage:a["a"].STATIC_DRAW});m.vertexArrayDestroyable=!1,h.push(m);const p={index:t.attributeIndex++,vertexBuffer:m,componentsPerAttribute:4,componentDatatype:r["a"].UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};t.attributes.push(p);const _=t.shaderBuilder;_.addDefine("USE_PICKING",void 0,u["a"].BOTH),_.addAttribute("vec4","a_pickColor"),_.addVarying("vec4","v_pickColor"),t.pickId="v_pickColor"}h.name="PickingPipelineStage",h.process=function(t,e,n){const i=n.context,a=t.runtimeNode,o=t.shaderBuilder,r=t.model,s=a.node.instances;if(t.hasPropertyTable)m(t,e,s,i);else if(Object(c["a"])(s))p(t,s,i);else{const e=f(t),n=i.createPickId(e);r._resources.push(n),o.addUniform("vec4","czm_pickColor",u["a"].FRAGMENT);const a=t.uniformMap;a.czm_pickColor=function(){return n.color},t.pickId="czm_pickColor"}},e["a"]=h},d6b4:function(t,e,n){"use strict";var i=n("1da3"),a=n("2bb9"),o=n("2f63"),r=n("ef54"),s=n("6168"),c=n("a141");const u={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)",process:function(t,e){const n=t.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,r["a"].VERTEX),p(n);for(let a=0;a<e.morphTargets.length;a++){const n=e.morphTargets[a],i=n.attributes;for(let e=0;e<i.length;e++){const n=i[e],o=n.semantic;o!==c["a"].POSITION&&o!==c["a"].NORMAL&&o!==c["a"].TANGENT||(l(t,n,t.attributeIndex,a),t.attributeIndex++)}}_(n);const i=t.runtimeNode.morphWeights,o=i.length;n.addUniform("float",`u_morphWeights[${o}]`,r["a"].VERTEX),n.addVertexLines([s["a"]]);const u={u_morphWeights:function(){return t.runtimeNode.morphWeights}};t.uniformMap=Object(a["a"])(u,t.uniformMap)}},d={attributeString:void 0,functionId:void 0};function l(t,e,n,i){const a=t.shaderBuilder;h(t,e,n);const o=f(e,d);m(a,o,i)}function h(t,e,n){const a={index:n,value:Object(o["a"])(e.buffer)?void 0:e.constant,vertexBuffer:e.buffer,componentsPerAttribute:i["a"].getNumberOfComponents(e.type),componentDatatype:e.componentDatatype,offsetInBytes:e.byteOffset,strideInBytes:e.byteStride,normalize:e.normalized};t.attributes.push(a)}function f(t,e){const n=t.semantic;switch(n){case c["a"].POSITION:e.attributeString="Position",e.functionId=u.FUNCTION_ID_GET_MORPHED_POSITION;break;case c["a"].NORMAL:e.attributeString="Normal",e.functionId=u.FUNCTION_ID_GET_MORPHED_NORMAL;break;case c["a"].TANGENT:e.attributeString="Tangent",e.functionId=u.FUNCTION_ID_GET_MORPHED_TANGENT;break;default:break}return e}function m(t,e,n){const i=e.attributeString,a=`a_target${i}_${n}`,o=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;t.addAttribute("vec3",a),t.addFunctionLines(e.functionId,[o])}function p(t){t.addFunction(u.FUNCTION_ID_GET_MORPHED_POSITION,u.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,r["a"].VERTEX);const e="vec3 morphedPosition = position;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_POSITION,[e]),t.addFunction(u.FUNCTION_ID_GET_MORPHED_NORMAL,u.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,r["a"].VERTEX);const n="vec3 morphedNormal = normal;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_NORMAL,[n]),t.addFunction(u.FUNCTION_ID_GET_MORPHED_TANGENT,u.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,r["a"].VERTEX);const i="vec3 morphedTangent = tangent;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_TANGENT,[i])}function _(t){const e="return morphedPosition;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_POSITION,[e]);const n="return morphedNormal;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_NORMAL,[n]);const i="return morphedTangent;";t.addFunctionLines(u.FUNCTION_ID_GET_MORPHED_TANGENT,[i])}e["a"]=u},d887:function(t,e,n){"use strict";const i={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",is3DTiles:function(t){switch(t){case i.TILE_GLTF:case i.TILE_B3DM:case i.TILE_I3DM:case i.TILE_PNTS:return!0;case i.GLTF:return!1}}};e["a"]=Object.freeze(i)},da71:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("dc1c");function a(t,e){this.model=t.model,this.shaderBuilder=t.shaderBuilder.clone(),this.uniformMap=Object(i["a"])(t.uniformMap),this.alphaOptions=Object(i["a"])(t.alphaOptions),this.renderStateOptions=Object(i["a"])(t.renderStateOptions),this.runtimeNode=e,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0,this.instancingTranslationMax=void 0,this.instancingTranslationMin=void 0}},df9b:function(t,e,n){"use strict";const i={UNLIT:0,PBR:1};e["a"]=Object.freeze(i)},ed6f:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("535a"),a=n("df9b");function o(t){t=Object(i["a"])(t,i["a"].EMPTY_OBJECT),this.lightingModel=Object(i["a"])(t.lightingModel,a["a"].UNLIT)}},f1ad:function(t,e,n){"use strict";var i=n("be18"),a=n("5f32"),o=n("535a"),r=n("2f63"),s=n("8920"),c=n("13e7"),u=n("7993"),d=n("8bde"),l=n("ea83"),h=n("0260"),f=n("38f2");const m=d["a"].AnimatedPropertyType;function p(t){t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const e=t.channel,n=t.runtimeAnimation,i=t.runtimeNode;this._channel=e,this._runtimeAnimation=n,this._runtimeNode=i,this._splines=[],this._path=void 0,O(this)}function _(t,e){const n=[],i=[],a=[],o=e.length;for(let r=0;r<o;r+=3)i.push(e[r]),n.push(e[r+1]),a.push(e[r+2]);return i.splice(0,1),a.length=a.length-1,new s["a"]({times:t,points:n,inTangents:i,outTangents:a})}function g(t,e,n,i){if(1===t.length&&1===e.length)return new a["a"](e[0]);switch(n){case c["a"].STEP:return new l["a"]({times:t,points:e});case c["a"].CUBICSPLINE:return _(t,e);case c["a"].LINEAR:return i===m.ROTATION?new f["a"]({times:t,points:e}):new u["a"]({times:t,points:e})}}function T(t,e,n,i,a){const o=[];if(i===m.WEIGHTS){const r=e.length,s=r/a;let u,d;for(u=0;u<a;u++){const r=new Array(s);let l=u;if(n===c["a"].CUBICSPLINE)for(d=0;d<s;d+=3)r[d]=e[l],r[d+1]=e[l+a],r[d+2]=e[l+2*a],l+=3*a;else for(d=0;d<s;d++)r[d]=e[l],l+=a;o.push(g(t,r,n,i))}}else o.push(g(t,e,n,i));return o}let b;function O(t){const e=t._channel,n=e.sampler,a=n.input,o=n.output,s=n.interpolation,c=e.target,u=c.path,d=t._runtimeNode,l=Object(r["a"])(d.morphWeights)?d.morphWeights.length:1,f=T(a,o,s,u,l);switch(t._splines=f,t._path=u,u){case m.TRANSLATION:case m.SCALE:b=new i["a"];break;case m.ROTATION:b=new h["a"];break;case m.WEIGHTS:break}}Object.defineProperties(p.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}}),p.prototype.animate=function(t){const e=this._splines,n=this._path,i=this._runtimeAnimation.model;if(n===m.WEIGHTS){const n=this._runtimeNode.morphWeights,a=n.length;for(let o=0;o<a;o++){const a=e[o],r=i.clampAnimations?a.clampTime(t):a.wrapTime(t);n[o]=a.evaluate(r)}}else{const a=e[0],o=i.clampAnimations?a.clampTime(t):a.wrapTime(t);this._runtimeNode[n]=a.evaluate(o,b)}},e["a"]=p}}]);