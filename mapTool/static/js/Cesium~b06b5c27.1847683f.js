(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~b06b5c27"],{"651c":function(t,e,a){"use strict";var s=a("77af"),i=a("bd8d"),r=a("2f63"),o=a("7d62"),n=a("d289"),m=a("6dc0"),h=a("5770"),c=a("4bec"),u=a("b7c8"),l=a("aea3");function f(t,e){this.show=!0,Object(r["a"])(t)||(t=new s["a"]),this.rectangle=s["a"].clone(t),Object(r["a"])(e)||(e=l["a"].fromType(l["a"].ColorType,{color:new i["a"](1,1,1,1)})),this.material=e,this._material=void 0,this._overlayCommand=void 0,this._rs=void 0}f.prototype.update=function(t){if(!this.show)return;const e=this._rs;Object(r["a"])(e)&&s["a"].equals(e.viewport,this.rectangle)||(this._rs=m["a"].fromCache({blending:u["a"].ALPHA_BLEND,viewport:this.rectangle}));const a=t.passes;if(a.render){const e=t.context;if(this._material!==this.material||!Object(r["a"])(this._overlayCommand)){this._material=this.material,Object(r["a"])(this._overlayCommand)&&this._overlayCommand.shaderProgram.destroy();const t=new h["a"]({sources:[this._material.shaderSource,c["a"]]});this._overlayCommand=e.createViewportQuadCommand(t,{renderState:this._rs,uniformMap:this._material._uniforms,owner:this}),this._overlayCommand.pass=n["a"].OVERLAY}this._material.update(e),this._overlayCommand.renderState=this._rs,this._overlayCommand.uniformMap=this._material._uniforms,t.commandList.push(this._overlayCommand)}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return Object(r["a"])(this._overlayCommand)&&(this._overlayCommand.shaderProgram=this._overlayCommand.shaderProgram&&this._overlayCommand.shaderProgram.destroy()),Object(o["a"])(this)},e["a"]=f},ef77:function(t,e,a){"use strict";var s=a("77af"),i=a("be18"),r=a("2384"),o=a("2f63"),n=a("ddf7"),m=a("017a"),h=a("93da"),c=a("52f0"),u=a("f845"),l=a("d289"),f=a("00f8"),d=a("9dbf"),p=a("5e59"),b=a("6f08"),M=a("8004"),g=a("dd7f"),_=a("8773"),y=a("e0bc"),v=a("7fe1"),F=a("a307"),w=a("569f"),C=a("ee05");function S(){this.command=void 0,this.near=void 0,this.far=void 0}function E(t,e,a){const i=t.context;let r,o;i.depthTexture&&(r=new b["a"]),t._useOIT&&i.depthTexture&&(o=new g["a"](i));const n=new f["a"](i);n.viewport=s["a"].clone(a),this.camera=e,this._cameraClone=d["a"].clone(e),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=a,this.passState=n,this.pickFramebuffer=new y["a"](i),this.pickDepthFramebuffer=new _["a"],this.sceneFramebuffer=new v["a"],this.globeDepth=r,this.globeTranslucencyFramebuffer=new M["a"],this.oit=o,this.translucentTileClassification=new C["a"](i),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const O=new i["a"],D=new i["a"];function x(t,e){const a=Math.max(Math.abs(t.x),Math.abs(e.x)),s=Math.max(Math.abs(t.y),Math.abs(e.y)),i=Math.max(Math.abs(t.z),Math.abs(e.z));return Math.max(Math.max(a,s),i)}function T(t,e,a){const s=1/Math.max(1,x(t.position,e.position));return i["a"].multiplyByScalar(t.position,s,O),i["a"].multiplyByScalar(e.position,s,D),i["a"].equalsEpsilon(O,D,a)&&i["a"].equalsEpsilon(t.direction,e.direction,a)&&i["a"].equalsEpsilon(t.up,e.up,a)&&i["a"].equalsEpsilon(t.right,e.right,a)&&c["a"].equalsEpsilon(t.transform,e.transform,a)&&t.frustum.equalsEpsilon(e.frustum,a)}function L(t,e,a,s){const i=e.frameState,r=i.camera,n=i.useLogDepth?e.logarithmicDepthFarToNearRatio:e.farToNearRatio,m=e.mode===F["a"].SCENE2D,c=e.nearToFarDistance2D;let u;s*=1+h["a"].EPSILON2,a=Math.min(Math.max(a,r.frustum.near),r.frustum.far),s=Math.max(Math.min(s,r.frustum.far),a),m?(s=Math.min(s,r.position.z+e.nearToFarDistance2D),a=Math.min(a,s),u=Math.ceil(Math.max(1,s-a)/e.nearToFarDistance2D)):u=Math.ceil(Math.log(s/a)/Math.log(n));const l=t.frustumCommandsList;l.length=u;for(let h=0;h<u;++h){let t,e;m?(t=Math.min(s-c,a+h*c),e=Math.min(s,t+c)):(t=Math.max(a,Math.pow(n,h)*a),e=Math.min(s,n*t));let i=l[h];Object(o["a"])(i)?(i.near=t,i.far=e):i=l[h]=new p["a"](t,e)}}function A(t,e,a,s,i){e.debugShowFrustums&&(a.debugOverlappingFrustums=0);const r=t.frustumCommandsList,n=r.length;for(let o=0;o<n;++o){const t=r[o],n=t.near,m=t.far;if(s>m)continue;if(i<n)break;const h=a.pass,c=t.indices[h]++;if(t.commands[h][c]=a,e.debugShowFrustums&&(a.debugOverlappingFrustums|=1<<o),a.executeInClosestFrustum)break}if(e.debugShowFrustums){const e=t.debugFrustumStatistics.commandsInFrustums;e[a.debugOverlappingFrustums]=Object(o["a"])(e[a.debugOverlappingFrustums])?e[a.debugOverlappingFrustums]+1:1,++t.debugFrustumStatistics.totalCommands}e.updateDerivedCommands(a)}E.prototype.checkForCameraUpdates=function(t){const e=this.camera,a=this._cameraClone;return T(e,a,h["a"].EPSILON15)?(this._cameraStartFired&&Object(n["a"])()-this._cameraMovedTime>t.cameraEventWaitTime&&(e.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(e.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=Object(n["a"])(),d["a"].clone(e,a),!0)};const k=new r["a"],j=new m["a"];E.prototype.createPotentiallyVisibleSet=function(t){const e=t.frameState,a=e.camera,s=a.directionWC,i=a.positionWC,r=t._computeCommandList,n=t._overlayCommandList,m=e.commandList;t.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const h=this.frustumCommandsList,c=h.length,f=l["a"].NUMBER_OF_PASSES;for(let o=0;o<c;++o)for(let t=0;t<f;++t)h[o].indices[t]=0;r.length=0,n.length=0;const d=this._commandExtents,p=d.length;let b=0,M=+Number.MAX_VALUE,g=-Number.MAX_VALUE;const _=e.shadowState.shadowsEnabled;let y=+Number.MAX_VALUE,v=-Number.MAX_VALUE,C=Number.MAX_VALUE;const E=e.mode===F["a"].SCENE3D?e.occluder:void 0;let O=e.cullingVolume;const D=k.planes;for(let o=0;o<5;++o)D[o]=O.planes[o];O=k;const x=m.length;for(let F=0;F<x;++F){const e=m[F],h=e.pass;if(h===l["a"].COMPUTE)r.push(e);else if(h===l["a"].OVERLAY)n.push(e);else{let r,n;const m=e.boundingVolume;if(Object(o["a"])(m)){if(!t.isVisible(e,O,E))continue;const a=m.computePlaneDistances(i,s,j);if(r=a.start,n=a.stop,M=Math.min(M,r),g=Math.max(g,n),_&&e.receiveShadows&&r<w["a"].MAXIMUM_DISTANCE&&!(h===l["a"].GLOBE&&r<-100&&n>100)){const t=n-r;h!==l["a"].GLOBE&&r<100&&(C=Math.min(C,t)),y=Math.min(y,r),v=Math.max(v,n)}}else e instanceof u["a"]?(r=a.frustum.near,n=a.frustum.far):(r=a.frustum.near,n=a.frustum.far,M=Math.min(M,r),g=Math.max(g,n));let c=d[b];Object(o["a"])(c)||(c=d[b]=new S),c.command=e,c.near=r,c.far=n,b++}}let T,N;for(_&&(y=Math.min(Math.max(y,a.frustum.near),a.frustum.far),v=Math.max(Math.min(v,a.frustum.far),y)),_&&(e.shadowState.nearPlane=y,e.shadowState.farPlane=v,e.shadowState.closestObjectSize=C),L(this,t,M,g),T=0;T<b;T++)N=d[T],A(this,t,N.command,N.near,N.far);if(b<p)for(T=b;T<p;T++){if(N=d[T],!Object(o["a"])(N.command))break;N.command=void 0}const P=h.length,V=e.frustumSplits;V.length=P+1;for(let o=0;o<P;++o)V[o]=h[o].near,o===P-1&&(V[o+1]=h[o].far)},E.prototype.destroy=function(){let t;this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const e=this.pickDepths,a=e.length;for(t=0;t<a;++t)e[t].destroy()},e["a"]=E}}]);