(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~a57d3e3a"],{2659:function(e,t,i){"use strict";var r=i("670c"),a=i("8dfe"),n=i("535a"),o=i("2f63"),s=i("c52f"),l=i("21d7"),c=i("5d5c"),u=i("23de"),d=i("af23"),h=i("eace"),f=i("de66"),m=i("8a39"),g=i("b82e"),_=i("d4ed"),v=i("283e"),b=i("1ee6"),y=i("553b"),p=i("a89b"),w=i("d3a0");const x=15;function A(e){this._resource=void 0,this._credit=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._maxLevel=void 0,this._terrainDataStructure=void 0,this._ready=!1,this._width=void 0,this._height=void 0,this._encoding=void 0;const t=e.token;this._hasAvailability=!1,this._tilesAvailable=void 0,this._tilesAvailablityLoaded=void 0,this._availableCache={};const i=this,d=Object(n["a"])(e.ellipsoid,s["a"].WGS84);this._readyPromise=Promise.resolve(e.url).then((function(e){let r=_["a"].createIfNeeded(e);r.appendForwardSlash(),Object(o["a"])(t)&&(r=r.getDerivedResource({queryParameters:{token:t}})),i._resource=r;const a=r.getDerivedResource({queryParameters:{f:"pjson"}});return a.fetchJson()})).then((function(e){const t=e.copyrightText;Object(o["a"])(t)&&(i._credit=new a["a"](t));const s=e.spatialReference,l=Object(n["a"])(s.latestWkid,s.wkid),f=e.extent,m={ellipsoid:d};if(4326===l)m.rectangle=h["a"].fromDegrees(f.xmin,f.ymin,f.xmax,f.ymax),i._tilingScheme=new c["a"](m);else{if(3857!==l)return Promise.reject(new v["a"]("Invalid spatial reference"));m.rectangleSouthwestInMeters=new r["a"](f.xmin,f.ymin),m.rectangleNortheastInMeters=new r["a"](f.xmax,f.ymax),i._tilingScheme=new w["a"](m)}const g=e.tileInfo;if(!Object(o["a"])(g))return Promise.reject(new v["a"]("tileInfo is required"));i._width=g.rows+1,i._height=g.cols+1,i._encoding="LERC"===g.format?u["a"].LERC:u["a"].NONE,i._lodCount=g.lods.length-1;const _=i._hasAvailability=-1!==e.capabilities.indexOf("Tilemap");return _&&(i._tilesAvailable=new y["a"](i._tilingScheme,i._lodCount),i._tilesAvailable.addAvailableTileRange(0,0,0,i._tilingScheme.getNumberOfXTilesAtLevel(0),i._tilingScheme.getNumberOfYTilesAtLevel(0)),i._tilesAvailablityLoaded=new y["a"](i._tilingScheme,i._lodCount)),i._levelZeroMaximumGeometricError=b["a"].getEstimatedLevelZeroGeometricErrorForAHeightmap(i._tilingScheme.ellipsoid,i._width,i._tilingScheme.getNumberOfXTilesAtLevel(0)),e.bandCount>1&&console.log("ArcGISTiledElevationTerrainProvider: Terrain data has more than 1 band. Using the first one."),i._terrainDataStructure={elementMultiplier:1,lowestEncodedHeight:e.minValues[0],highestEncodedHeight:e.maxValues[0]},i._ready=!0,!0})).catch((function(e){const t=`An error occurred while accessing ${i._resource.url}.`;return p["a"].handleError(void 0,i,i._errorEvent,t),Promise.reject(e)})),this._errorEvent=new l["a"]}function T(e,t,i,r){if(!e._hasAvailability)return;const a=e._tilesAvailablityLoaded,n=e._tilesAvailable;return!(t>e._lodCount)&&(!!n.isTileAvailable(t,i,r)||!a.isTileAvailable(t,i,r)&&void 0)}function j(e,t,i,a){const n=t-1,o=i-1,s=a[e.y*t+e.x],l=[],c={startX:e.x,startY:e.y,endX:0,endY:0},u=new r["a"](e.x+1,e.y+1);let d=!1,h=!1;while(!d||!h){let i=u.x;const f=h?u.y+1:u.y;if(!d){for(let i=e.y;i<f;++i)if(a[i*t+u.x]!==s){d=!0;break}d?(l.push(new r["a"](u.x,e.y)),--u.x,--i,c.endX=u.x):u.x===n?(c.endX=u.x,d=!0):++u.x}if(!h){const n=u.y*t;for(let t=e.x;t<=i;++t)if(a[n+t]!==s){h=!0;break}h?(l.push(new r["a"](e.x,u.y)),--u.y,c.endY=u.y):u.y===o?(c.endY=u.y,h=!0):++u.y}}return{endingIndices:l,range:c,value:s}}function O(e,t,i,a,n){const o=[],s=n.every((function(e){return e===n[0]}));if(s)return 1===n[0]&&o.push({startX:e,startY:t,endX:e+i-1,endY:t+a-1}),o;let l=[new r["a"](0,0)];while(l.length>0){const r=l.pop(),s=j(r,i,a,n);if(1===s.value){const i=s.range;i.startX+=e,i.endX+=e,i.startY+=t,i.endY+=t,o.push(i)}const c=s.endingIndices;c.length>0&&(l=l.concat(c))}return o}function M(e,t,i,r){if(!e._hasAvailability)return{};const a=128*Math.floor(i/128),n=128*Math.floor(r/128),s=Math.min(1<<t,128),l=`tilemap/${t}/${n}/${a}/${s}/${s}`,c=e._availableCache;if(Object(o["a"])(c[l]))return c[l];const u=new f["a"]({throttle:!1,throttleByServer:!0,type:g["a"].TERRAIN}),d=e._resource.getDerivedResource({url:l,request:u});let h=d.fetchJson();return Object(o["a"])(h)?(h=h.then((function(o){const l=O(a,n,s,s,o.data);e._tilesAvailablityLoaded.addAvailableTileRange(t,a,n,a+s,n+s);const c=e._tilesAvailable;for(let e=0;e<l.length;++e){const i=l[e];c.addAvailableTileRange(t,i.startX,i.startY,i.endX,i.endY)}return T(e,t,i,r)})),c[l]={promise:h,request:u},h=h.finally((function(e){return delete c[l],e})),{promise:h,request:u}):{}}Object.defineProperties(A.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){return this._tilesAvailable}}}),A.prototype.requestTileGeometry=function(e,t,i,r){const a=this._resource.getDerivedResource({url:`tile/${i}/${t}/${e}`,request:r}),n=this._hasAvailability;let s,l=Promise.resolve(!0);if(n&&!Object(o["a"])(T(this,i+1,2*e,2*t))){const r=M(this,i+1,2*e,2*t);l=r.promise,s=r.request}const c=a.fetchArrayBuffer();if(!Object(o["a"])(c)||!Object(o["a"])(l))return;const u=this,h=this._tilesAvailable;return Promise.all([c,l]).then((function(r){return new d["a"]({buffer:r[0],width:u._width,height:u._height,childTileMask:n?h.computeChildMaskForTile(i,e,t):x,structure:u._terrainDataStructure,encoding:u._encoding})})).catch((function(e){return Object(o["a"])(s)&&s.state===m["a"].CANCELLED?(r.cancel(),r.deferred.promise.finally((function(){return r.state=m["a"].CANCELLED,Promise.reject(e)}))):Promise.reject(e)}))},A.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},A.prototype.getTileDataAvailable=function(e,t,i){if(!this._hasAvailability)return;const r=T(this,i,e,t);if(Object(o["a"])(r))return r;M(this,i,e,t)},A.prototype.loadTileDataAvailability=function(e,t,i){},t["a"]=A},9201:function(e,t,i){"use strict";const r={NONE:0,GEODESIC:1,RHUMB:2};t["a"]=Object.freeze(r)},dd06:function(e,t,i){"use strict";var r=i("cef5"),a=i("7229"),n=i("670c"),o=i("be18"),s=i("bef8"),l=i("535a"),c=i("2f63"),u=i("c52f"),d=i("5d5c"),h=i("eace"),f=i("d4ed");const m=new o["a"],g=new o["a"],_=new s["a"],v=new o["a"],b=new o["a"],y=new r["a"],p=new d["a"],w=[new s["a"],new s["a"],new s["a"],new s["a"]],x=new n["a"],A={};function T(e){s["a"].fromRadians(e.east,e.north,0,w[0]),s["a"].fromRadians(e.west,e.north,0,w[1]),s["a"].fromRadians(e.east,e.south,0,w[2]),s["a"].fromRadians(e.west,e.south,0,w[3]);let t=0,i=0,r=0,a=0;const n=A._terrainHeightsMaxLevel;let o;for(o=0;o<=n;++o){let e=!1;for(let t=0;t<4;++t){const i=w[t];if(p.positionToTileXY(i,o,x),0===t)r=x.x,a=x.y;else if(r!==x.x||a!==x.y){e=!0;break}}if(e)break;t=r,i=a}if(0!==o)return{x:t,y:i,level:o>n?n:o-1}}A.initialize=function(){let e=A._initPromise;return Object(c["a"])(e)||(e=f["a"].fetchJson(Object(a["a"])("Assets/approximateTerrainHeights.json")).then((function(e){A._terrainHeights=e})),A._initPromise=e),e},A.getMinimumMaximumHeights=function(e,t){t=Object(l["a"])(t,u["a"].WGS84);const i=T(e);let r=A._defaultMinTerrainHeight,a=A._defaultMaxTerrainHeight;if(Object(c["a"])(i)){const n=`${i.level}-${i.x}-${i.y}`,s=A._terrainHeights[n];Object(c["a"])(s)&&(r=s[0],a=s[1]),t.cartographicToCartesian(h["a"].northeast(e,_),m),t.cartographicToCartesian(h["a"].southwest(e,_),g),o["a"].midpoint(g,m,v);const l=t.scaleToGeodeticSurface(v,b);if(Object(c["a"])(l)){const e=o["a"].distance(v,l);r=Math.min(r,-e)}else r=A._defaultMinTerrainHeight}return r=Math.max(A._defaultMinTerrainHeight,r),{minimumTerrainHeight:r,maximumTerrainHeight:a}},A.getBoundingSphere=function(e,t){t=Object(l["a"])(t,u["a"].WGS84);const i=T(e);let a=A._defaultMaxTerrainHeight;if(Object(c["a"])(i)){const e=`${i.level}-${i.x}-${i.y}`,t=A._terrainHeights[e];Object(c["a"])(t)&&(a=t[1])}const n=r["a"].fromRectangle3D(e,t,0);return r["a"].fromRectangle3D(e,t,a,y),r["a"].union(n,y,n)},A._terrainHeightsMaxLevel=6,A._defaultMaxTerrainHeight=9e3,A._defaultMinTerrainHeight=-1e5,A._terrainHeights=void 0,A._initPromise=void 0,Object.defineProperties(A,{initialized:{get:function(){return Object(c["a"])(A._terrainHeights)}}}),t["a"]=A}}]);